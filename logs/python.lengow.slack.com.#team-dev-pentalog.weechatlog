2016-06-06 10:27:40	sebastien.charret	sebastien.charret has joined the group
2016-06-06 10:29:15	clementidelon	clementidelon has joined the group
2016-06-06 10:29:24	caixia	caixia has joined the group
2016-06-06 10:29:36	malo	malo has joined the group
2016-06-06 10:29:49	adrientallot	adrientallot has joined the group
2016-06-06 10:30:00	kevinmajor-domo	kevinmajor-domo has joined the group
2016-06-06 10:30:13	bianca	ok
2016-06-06 10:31:06	⤷	semble qu'il marche bien
2016-06-06 10:32:57	amaxinas	amaxinas has joined the group
2016-06-06 10:33:13	gadumitrachioaiei	gadumitrachioaiei has joined the group
2016-06-06 10:33:24	ematifrea	ematifrea has joined the group
2016-06-06 10:34:33	muj_gabriel	muj_gabriel has joined the group
2016-06-06 10:37:03	alodin	alodin has joined the group
2016-06-06 10:37:41	thomas.loiret	welcome guys :slightly_smiling_face:
2016-06-06 10:39:28	gadumitrachioaiei	thank you
2016-06-06 10:39:34	alodin	hello
2016-06-06 10:39:59	amaxinas	Merci!
2016-06-06 10:41:15	ematifrea	hello
2016-06-06 10:41:31	malo	Hello :smiley:
2016-06-06 10:42:13	caixia	Hello
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere about the calls?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-06 10:27:40	sebastien.charret	sebastien.charret has joined the group
2016-06-06 10:29:15	clementidelon	clementidelon has joined the group
2016-06-06 10:29:24	caixia	caixia has joined the group
2016-06-06 10:29:36	malo	malo has joined the group
2016-06-06 10:29:49	adrientallot	adrientallot has joined the group
2016-06-06 10:30:00	kevinmajor-domo	kevinmajor-domo has joined the group
2016-06-06 10:30:13	bianca	ok
2016-06-06 10:31:06	⤷	semble qu'il marche bien
2016-06-06 10:32:57	amaxinas	amaxinas has joined the group
2016-06-06 10:33:13	gadumitrachioaiei	gadumitrachioaiei has joined the group
2016-06-06 10:33:24	ematifrea	ematifrea has joined the group
2016-06-06 10:34:33	muj_gabriel	muj_gabriel has joined the group
2016-06-06 10:37:03	alodin	alodin has joined the group
2016-06-06 10:37:41	thomas.loiret	welcome guys :slightly_smiling_face:
2016-06-06 10:39:28	gadumitrachioaiei	thank you
2016-06-06 10:39:34	alodin	hello
2016-06-06 10:39:59	amaxinas	Merci!
2016-06-06 10:41:15	ematifrea	hello
2016-06-06 10:41:31	malo	Hello :smiley:
2016-06-06 10:42:13	caixia	Hello
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere in this cases?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-08 09:44:15	oleksandr	Hello, I have a few questions about fyndiq
2016-06-08 09:48:17	⤷	How did you do a test orders? Also I see possibility to add a parameter "marked"  to order but I don't see any possibility to obtain this field (api-v2). Is there some possibility to do it? Thank you.
2016-06-08 10:29:14	thomas.loiret	http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/
2016-06-08 10:29:14		Jon Russell: Rakuten to exit the UK, Austria and Spain as global retrenchment continues (http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/)
2016-06-08 10:29:14		Rakuten is downsizing its international presence once again after Japan's top e-commerce firm announced plans to shutter its e-commerce businesses in the UK, Spain and Austria.
2016-06-08 10:30:33	muj_gabriel	@thomas.loiret: this was before or after I cancelled the orders?:)))
2016-06-08 10:33:04	thomas.loiret	after, anyway, the marketplace is still live until the end of august
2016-06-08 10:49:14	amaxinas	@oleksandr:  If I remember correctly, we had to do another call after each order action to set the order as handled, but this parameter was not retrieved on a GET call for orders. Afaik we filtered just on order date.
2016-06-08 10:49:14		The v1 api mentions this:
2016-06-08 10:49:14		`Order can be marked as handled by setting the field marked to true.`
2016-06-08 10:49:14		`This field can be used to filter orders in a GET request, to only show unhandled orders.`
2016-06-08 10:49:14		But i've tried now to filter by marked status and it doesn't seem to work.
2016-06-08 10:50:45	bianca	We used the details of the test account: user: lengow
2016-06-08 10:50:45		API token: PRgj9wovSjHf0qJOm7w0D3QzxSv8p75s
2016-06-08 10:55:07	amaxinas	@oleksandr: It seems the call to update the marked attribute (via POST or PATCH ) doesn't work anymore.
2016-06-08 10:56:29	oleksandr	@alexandru Yep, I have 404 for this action
2016-06-08 10:57:36	⤷	@amaxinas: And how I understand there is possibility to get this value only in V1
2016-06-08 10:59:35	⤷	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)." It will contain the numbers of success/fails no detail at all...
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the office...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related ti the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-06-06 10:27:40	sebastien.charret	sebastien.charret has joined the group
2016-06-06 10:29:15	clementidelon	clementidelon has joined the group
2016-06-06 10:29:24	caixia	caixia has joined the group
2016-06-06 10:29:36	malo	malo has joined the group
2016-06-06 10:29:49	adrientallot	adrientallot has joined the group
2016-06-06 10:30:00	kevinmajor-domo	kevinmajor-domo has joined the group
2016-06-06 10:30:13	bianca	ok
2016-06-06 10:31:06	⤷	semble qu'il marche bien
2016-06-06 10:32:57	amaxinas	amaxinas has joined the group
2016-06-06 10:33:13	gadumitrachioaiei	gadumitrachioaiei has joined the group
2016-06-06 10:33:24	ematifrea	ematifrea has joined the group
2016-06-06 10:34:33	muj_gabriel	muj_gabriel has joined the group
2016-06-06 10:37:03	alodin	alodin has joined the group
2016-06-06 10:37:41	thomas.loiret	welcome guys :slightly_smiling_face:
2016-06-06 10:39:28	gadumitrachioaiei	thank you
2016-06-06 10:39:34	alodin	hello
2016-06-06 10:39:59	amaxinas	Merci!
2016-06-06 10:41:15	ematifrea	hello
2016-06-06 10:41:31	malo	Hello :smiley:
2016-06-06 10:42:13	caixia	Hello
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere in this cases?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-08 09:44:15	oleksandr	Hello, I have a few questions about fyndiq
2016-06-08 09:48:17	⤷	How did you do a test orders? Also I see possibility to add a parameter "marked"  to order but I don't see any possibility to obtain this field (api-v2). Is there some possibility to do it? Thank you.
2016-06-08 10:29:14	thomas.loiret	http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/
2016-06-08 10:29:14		Jon Russell: Rakuten to exit the UK, Austria and Spain as global retrenchment continues (http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/)
2016-06-08 10:29:14		Rakuten is downsizing its international presence once again after Japan's top e-commerce firm announced plans to shutter its e-commerce businesses in the UK, Spain and Austria.
2016-06-08 10:30:33	muj_gabriel	@thomas.loiret: this was before or after I cancelled the orders?:)))
2016-06-08 10:33:04	thomas.loiret	after, anyway, the marketplace is still live until the end of august
2016-06-08 10:49:14	amaxinas	@oleksandr:  If I remember correctly, we had to do another call after each order action to set the order as handled, but this parameter was not retrieved on a GET call for orders. Afaik we filtered just on order date.
2016-06-08 10:49:14		The v1 api mentions this:
2016-06-08 10:49:14		`Order can be marked as handled by setting the field marked to true.`
2016-06-08 10:49:14		`This field can be used to filter orders in a GET request, to only show unhandled orders.`
2016-06-08 10:49:14		But i've tried now to filter by marked status and it doesn't seem to work.
2016-06-08 10:50:45	bianca	We used the details of the test account: user: lengow
2016-06-08 10:50:45		API token: PRgj9wovSjHf0qJOm7w0D3QzxSv8p75s
2016-06-08 10:55:07	amaxinas	@oleksandr: It seems the call to update the marked attribute (via POST or PATCH ) doesn't work anymore.
2016-06-08 10:56:29	oleksandr	@alexandru Yep, I have 404 for this action
2016-06-08 10:57:36	⤷	@amaxinas: And how I understand there is possibility to get this value only in V1
2016-06-08 10:59:35	⤷	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	tnaks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have sync actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	extraima
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-06-06 10:27:40	sebastien.charret	sebastien.charret has joined the group
2016-06-06 10:29:15	clementidelon	clementidelon has joined the group
2016-06-06 10:29:24	caixia	caixia has joined the group
2016-06-06 10:29:36	malo	malo has joined the group
2016-06-06 10:29:49	adrientallot	adrientallot has joined the group
2016-06-06 10:30:00	kevinmajor-domo	kevinmajor-domo has joined the group
2016-06-06 10:30:13	bianca	ok
2016-06-06 10:31:06	⤷	semble qu'il marche bien
2016-06-06 10:32:57	amaxinas	amaxinas has joined the group
2016-06-06 10:33:13	gadumitrachioaiei	gadumitrachioaiei has joined the group
2016-06-06 10:33:24	ematifrea	ematifrea has joined the group
2016-06-06 10:34:33	muj_gabriel	muj_gabriel has joined the group
2016-06-06 10:37:03	alodin	alodin has joined the group
2016-06-06 10:37:41	thomas.loiret	welcome guys :slightly_smiling_face:
2016-06-06 10:39:28	gadumitrachioaiei	thank you
2016-06-06 10:39:34	alodin	hello
2016-06-06 10:39:59	amaxinas	Merci!
2016-06-06 10:41:15	ematifrea	hello
2016-06-06 10:41:31	malo	Hello :smiley:
2016-06-06 10:42:13	caixia	Hello
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere in this cases?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-08 09:44:15	oleksandr	Hello, I have a few questions about fyndiq
2016-06-08 09:48:17	⤷	How did you do a test orders? Also I see possibility to add a parameter "marked"  to order but I don't see any possibility to obtain this field (api-v2). Is there some possibility to do it? Thank you.
2016-06-08 10:29:14	thomas.loiret	http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/
2016-06-08 10:29:14		Jon Russell: Rakuten to exit the UK, Austria and Spain as global retrenchment continues (http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/)
2016-06-08 10:29:14		Rakuten is downsizing its international presence once again after Japan's top e-commerce firm announced plans to shutter its e-commerce businesses in the UK, Spain and Austria.
2016-06-08 10:30:33	muj_gabriel	@thomas.loiret: this was before or after I cancelled the orders?:)))
2016-06-08 10:33:04	thomas.loiret	after, anyway, the marketplace is still live until the end of august
2016-06-08 10:49:14	amaxinas	@oleksandr:  If I remember correctly, we had to do another call after each order action to set the order as handled, but this parameter was not retrieved on a GET call for orders. Afaik we filtered just on order date.
2016-06-08 10:49:14		The v1 api mentions this:
2016-06-08 10:49:14		`Order can be marked as handled by setting the field marked to true.`
2016-06-08 10:49:14		`This field can be used to filter orders in a GET request, to only show unhandled orders.`
2016-06-08 10:49:14		But i've tried now to filter by marked status and it doesn't seem to work.
2016-06-08 10:50:45	bianca	We used the details of the test account: user: lengow
2016-06-08 10:50:45		API token: PRgj9wovSjHf0qJOm7w0D3QzxSv8p75s
2016-06-08 10:55:07	amaxinas	@oleksandr: It seems the call to update the marked attribute (via POST or PATCH ) doesn't work anymore.
2016-06-08 10:56:29	oleksandr	@alexandru Yep, I have 404 for this action
2016-06-08 10:57:36	⤷	@amaxinas: And how I understand there is possibility to get this value only in V1
2016-06-08 10:59:35	⤷	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-06-06 10:27:40	sebastien.charret	sebastien.charret has joined the group
2016-06-06 10:29:15	clementidelon	clementidelon has joined the group
2016-06-06 10:29:24	caixia	caixia has joined the group
2016-06-06 10:29:36	malo	malo has joined the group
2016-06-06 10:29:49	adrientallot	adrientallot has joined the group
2016-06-06 10:30:00	kevinmajor-domo	kevinmajor-domo has joined the group
2016-06-06 10:30:13	bianca	ok
2016-06-06 10:31:06	⤷	semble qu'il marche bien
2016-06-06 10:32:57	amaxinas	amaxinas has joined the group
2016-06-06 10:33:13	gadumitrachioaiei	gadumitrachioaiei has joined the group
2016-06-06 10:33:24	ematifrea	ematifrea has joined the group
2016-06-06 10:34:33	muj_gabriel	muj_gabriel has joined the group
2016-06-06 10:37:03	alodin	alodin has joined the group
2016-06-06 10:37:41	thomas.loiret	welcome guys :slightly_smiling_face:
2016-06-06 10:39:28	gadumitrachioaiei	thank you
2016-06-06 10:39:34	alodin	hello
2016-06-06 10:39:59	amaxinas	Merci!
2016-06-06 10:41:15	ematifrea	hello
2016-06-06 10:41:31	malo	Hello :smiley:
2016-06-06 10:42:13	caixia	Hello
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere in this cases?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-08 09:44:15	oleksandr	Hello, I have a few questions about fyndiq
2016-06-08 09:48:17	⤷	How did you do a test orders? Also I see possibility to add a parameter "marked"  to order but I don't see any possibility to obtain this field (api-v2). Is there some possibility to do it? Thank you.
2016-06-08 10:29:14	thomas.loiret	http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/
2016-06-08 10:29:14		Jon Russell: Rakuten to exit the UK, Austria and Spain as global retrenchment continues (http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/)
2016-06-08 10:29:14		Rakuten is downsizing its international presence once again after Japan's top e-commerce firm announced plans to shutter its e-commerce businesses in the UK, Spain and Austria.
2016-06-08 10:30:33	muj_gabriel	@thomas.loiret: this was before or after I cancelled the orders?:)))
2016-06-08 10:33:04	thomas.loiret	after, anyway, the marketplace is still live until the end of august
2016-06-08 10:49:14	amaxinas	@oleksandr:  If I remember correctly, we had to do another call after each order action to set the order as handled, but this parameter was not retrieved on a GET call for orders. Afaik we filtered just on order date.
2016-06-08 10:49:14		The v1 api mentions this:
2016-06-08 10:49:14		`Order can be marked as handled by setting the field marked to true.`
2016-06-08 10:49:14		`This field can be used to filter orders in a GET request, to only show unhandled orders.`
2016-06-08 10:49:14		But i've tried now to filter by marked status and it doesn't seem to work.
2016-06-08 10:50:45	bianca	We used the details of the test account: user: lengow
2016-06-08 10:50:45		API token: PRgj9wovSjHf0qJOm7w0D3QzxSv8p75s
2016-06-08 10:55:07	amaxinas	@oleksandr: It seems the call to update the marked attribute (via POST or PATCH ) doesn't work anymore.
2016-06-08 10:56:29	oleksandr	@alexandru Yep, I have 404 for this action
2016-06-08 10:57:36	⤷	@amaxinas: And how I understand there is possibility to get this value only in V1
2016-06-08 10:59:35	⤷	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to and invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometime the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I susspose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	Good morning. I've just attached the attributes xml for allyouneed
2016-07-27 08:34:51		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:34:51		Please take a look when you have time.
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager for core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-06-06 10:42:48	kevinmajor-domo	Hi, welcome :slightly_smiling_face:
2016-06-06 10:46:34	bianca	thx, everything will be easier now :slightly_smiling_face:
2016-06-06 10:47:40	⤷	Thomas, so if we will have questions regarding the flow can we write them here?
2016-06-06 10:48:05	thomas.loiret	yes :slightly_smiling_face:
2016-06-06 10:49:50	bianca	ok, great!
2016-06-07 10:02:22	ematifrea	one question related to sync_thesaurus: in the test environment for Rakuten DE, there is only one category available, so the current implementation does add the "lengow_root" category (as the get_breadcrumb method expects at least 2 elements ), can we assume the same for production, that we need to insert a category root?  please advise, thank you
2016-06-07 10:11:53	⤷	do we have an account for Rakuten DE to see how categories are structured?
2016-06-07 10:28:55	thomas.loiret	Ema, I think that categories for Rakuten DE are provided by a CSV file or something like that, let me check with a colleague if I can have it
2016-06-07 10:30:53	ematifrea	for Rakuten De we are only retrieving the shop categories so an account would be useful to create some categories of different levels as the test environment category is of level 3 - not helpfull
2016-06-07 10:36:37	amaxinas	The documentation for rakuten DE says that a product supports up to 5 images. (/products/addProductImage). How do you think we should map this in the attributes synchronization? 
2016-06-07 10:36:37		In common attributes we should set
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'images',
2016-06-07 10:36:37		            'name': 'images',
2016-06-07 10:36:37		            'description': 'List of image file URLs',
2016-06-07 10:36:37		            'type': 'list',
2016-06-07 10:36:37		            'use': 'optional',
2016-06-07 10:36:37		            'range': 'open',
2016-06-07 10:36:37		            'multi': 'true'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		or 
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image1_url',
2016-06-07 10:36:37		            'name': 'image1_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        },
2016-06-07 10:36:37		.............................
2016-06-07 10:36:37		{
2016-06-07 10:36:37		            'id': 'image5_url',
2016-06-07 10:36:37		            'name': 'image5_url',
2016-06-07 10:36:37		            'description': '',
2016-06-07 10:36:37		            'type': 'string',
2016-06-07 10:36:37		            'use': 'optional'
2016-06-07 10:36:37		        }
2016-06-07 10:36:37		?
2016-06-07 10:36:37		I see in v2 that in business_logic.py, Product class, make_from_dict method this line is found 
2016-06-07 10:36:37		datas['image'].split('|') which implies that we receive a list of urls separated by a | sign.
2016-06-07 10:36:37		Which method is preferred and if the one with separator is the one where is the separator set?
2016-06-07 10:38:42	thomas.loiret	@ematifrea: Here is some merchant API keys : f163307dda40c48efaef2da18b79083a, 425e4e333cd4e0468b043042c1e0b2d6, 7bb315ee8f5afd0ab02e8053d59a6f45. You should be able to retrieve their shop categories. Be careful, this is production keys :slightly_smiling_face:
2016-06-07 10:39:50	bianca	merci
2016-06-07 10:40:09	thomas.loiret	@amaxinas: in this case, you should use different attributes (image1, image2, ...) (pro tips: you can make code snippet with slack :wink: )
2016-06-07 10:42:09	amaxinas	Then, i guess, we should also change this in case of rakuten rms. :slightly_smiling_face:
2016-06-07 10:44:22	thomas.loiret	@amaxinas: nope, for Rakuten RMS you should keep one attributes with a separator. The reason behind those choices is the migration we will do. Rakuten RMS use a separator is v2 so it will be the same in v3, and Rakuten DE use multiples attributes so it will be the same in v3 :slightly_smiling_face:
2016-06-07 11:46:30	ematifrea	@thomas.loiret: thank you, very helpful; just to double check: store_root is now obsolete right? using --priority instead
2016-06-07 11:59:37	caixia	@ematifrea:  yes, exactly
2016-06-07 13:42:06	muj_gabriel	I have a question for cdiscount marketplace: for the report parsing action we don't have samples of api responses when report is available and when report has errors. Right now we only know the response structure for when a product is integrated (and this structure was taken from documentation, no real call to api).
2016-06-07 13:49:45	⤷	What should we do in this case with the user story? Do we have any samples somewhere in this cases?
2016-06-07 14:48:27	thomas.loiret	@muj_gabriel: I will give you a production token for one of our merchant, so you can retrieve at least one example
2016-06-07 14:48:53	⤷	token : e6167bbdaf494a8ba79bc88d8ca058e9
2016-06-07 14:49:35	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EP74BBP/submitofferpackage_response.xml (SubmitOfferPackage response)
2016-06-07 14:50:18	⤷	if you need more informations/examples, please let me know
2016-06-07 14:54:42	muj_gabriel	We do have this response covered. From this we can just assume PackageIntegrationStatus=true/false means report availability ? And if we have error how ErrorList would look like? Thanks!
2016-06-07 15:10:54	thomas.loiret	We can assume that PackageIntegrationStatus=true/false means report availability
2016-06-07 15:11:16	⤷	I didn't manage to find any example with errors, I will send an email to CDiscount about that
2016-06-07 15:33:12	muj_gabriel	Another question related to cdiscount report. For sync_light_offers do we need to parse report? We do get a report id that we can later check the same as for sync_offers.
2016-06-07 16:04:40	thomas.loiret	In this case, you don't need to parse the report
2016-06-07 17:02:37	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1EQ9GC0N/errorlist_example.xml (ErrorList example)
2016-06-07 17:02:59	⤷	@muj_gabriel: an example of ErrorList provided by CDiscount
2016-06-07 17:03:28	muj_gabriel	danke schone
2016-06-07 17:10:56	⤷	But the error is too generic, we cannot map the message to an product_id; to add errors with ErrorManager we need that as key in the dictionary
2016-06-07 17:24:27	thomas.loiret	I think error list here are linked to the package, if there is error at this point it is about the whole package and not one product, you may take a look at GetOfferPackageSubmissionResult to  get the report for each product
2016-06-08 09:44:15	oleksandr	Hello, I have a few questions about fyndiq
2016-06-08 09:48:17	⤷	How did you do a test orders? Also I see possibility to add a parameter "marked"  to order but I don't see any possibility to obtain this field (api-v2). Is there some possibility to do it? Thank you.
2016-06-08 10:29:14	thomas.loiret	http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/
2016-06-08 10:29:14		Jon Russell: Rakuten to exit the UK, Austria and Spain as global retrenchment continues (http://techcrunch.com/2016/06/07/rakuten-to-exit-the-uk-austria-and-spain-as-global-retrenchment-continues/)
2016-06-08 10:29:14		Rakuten is downsizing its international presence once again after Japan's top e-commerce firm announced plans to shutter its e-commerce businesses in the UK, Spain and Austria.
2016-06-08 10:30:33	muj_gabriel	@thomas.loiret: this was before or after I cancelled the orders?:)))
2016-06-08 10:33:04	thomas.loiret	after, anyway, the marketplace is still live until the end of august
2016-06-08 10:49:14	amaxinas	@oleksandr:  If I remember correctly, we had to do another call after each order action to set the order as handled, but this parameter was not retrieved on a GET call for orders. Afaik we filtered just on order date.
2016-06-08 10:49:14		The v1 api mentions this:
2016-06-08 10:49:14		`Order can be marked as handled by setting the field marked to true.`
2016-06-08 10:49:14		`This field can be used to filter orders in a GET request, to only show unhandled orders.`
2016-06-08 10:49:14		But i've tried now to filter by marked status and it doesn't seem to work.
2016-06-08 10:50:45	bianca	We used the details of the test account: user: lengow
2016-06-08 10:50:45		API token: PRgj9wovSjHf0qJOm7w0D3QzxSv8p75s
2016-06-08 10:55:07	amaxinas	@oleksandr: It seems the call to update the marked attribute (via POST or PATCH ) doesn't work anymore.
2016-06-08 10:56:29	oleksandr	@alexandru Yep, I have 404 for this action
2016-06-08 10:57:36	⤷	@amaxinas: And how I understand there is possibility to get this value only in V1
2016-06-08 10:59:35	⤷	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-06-08 10:59:35	oleksandr	@bianca:  Thank you
2016-06-08 10:59:42	bianca	the main problem is that now Patch marked as handles is not working anymore
2016-06-08 10:59:59	⤷	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-06-08 10:59:59	bianca	in v2
2016-06-08 11:00:06	⤷	and it worked when we test it
2016-06-08 11:00:51	oleksandr	I think that v2 is still in developing
2016-06-08 11:00:57	bianca	now it gives 404 , and yes in  the examples retreieving the orders from v2 does not provide the field marked
2016-06-08 11:05:12	⤷	in the documentation they don't say that it is in developing but seems that is not a stable version
2016-06-08 11:08:23	oleksandr	Can you please give me link for page to make a test order? I still can't find it.
2016-06-08 11:11:15	bianca	No real test can be done, with the test account the api https://api.fyndiq.com/v2/orders  return only fake orders and we used only those values
2016-06-08 11:13:35	oleksandr	Thank you for explication
2016-06-08 11:18:10	amaxinas	@oleksandr: Np! Good luck! :slightly_smiling_face:
2016-06-08 11:44:07	bianca	A short update : we analyzed the history on skype and Thomas asked Fyndiq about 404 error status
2016-06-08 11:44:11	⤷	[2/9/2016 8:03:34 PM] Thomas Loiret: The response from Fyndiq about the 404 error:
2016-06-08 11:44:11		[2/9/2016 8:03:35 PM] Thomas Loiret: unfortunately, you can't check the sending of tracking numbers with the test orders. Here applies the same as for the delivery note resource requests: the order ID for the test orders will not be found in our live order resource and therefore you can't test it. The only way to test this would be to place a real order. The request otherwise looks good!
2016-06-08 11:45:19	⤷	seems that for the testing account it does provide 404 error  but fyndiq said that this happens only for the test account fake orders and it should work with the real order
2016-06-08 11:45:51	oleksandr	It sounds good
2016-06-08 12:02:59	amaxinas	@oleksandr: sorry about that!
2016-06-08 12:33:14	oleksandr	@amaxinas: No problem! :slightly_smiling_face:
2016-06-08 13:18:59	muj_gabriel	@thomas.loiret: I sent you on skype details about the rakuten_uk orders when we had the meeting, did you received them?
2016-06-08 14:46:23	thomas.loiret	yes, thank you
2016-06-08 14:46:44	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1F3JBYP6/pymp.bundle (pymp.bundle)
2016-06-08 14:47:23	⤷	the bundle with the latest version of our code. FYI, we change our branch name, we rename 'v3' to 'dev'
2016-06-08 14:55:59	bianca	ok, thx
2016-06-08 15:46:15	⤷	for the next sprint we selected wish V3
2016-06-08 15:47:52	thomas.loiret	ok
2016-06-08 16:35:10	gadumitrachioaiei	hi guys
2016-06-08 16:35:10		I don't understand how things work anymore
2016-06-08 16:35:10		for example, in __init__.py from a mp ( e.g. mp_cdiscount ) you do:
2016-06-08 16:35:10		default_app_config = 'mp_cdiscount.apps.AppConfig'
2016-06-08 16:35:10		and that is it
2016-06-08 16:35:10		before we had here all the tasks, so that the core commands can find the tasks and run them
2016-06-08 16:36:05	⤷	for sp marketplaces things seem to be like old stuff
2016-06-08 16:36:05		what should we do ? (edited)
2016-06-08 16:55:36	⤷	all cdiscount marketplaces have changed this way
2016-06-08 16:55:47	⤷	I suppose we should keep our version ?
2016-06-08 17:46:14	thomas.loiret	@gadumitrachioaiei: it seems that our refacto to go to Django1.9 was not complete, we will discuss it tomorrow with the team in Nantes and come back to you quickly
2016-06-09 10:12:04	clementidelon	Hi @gadumitrachioaiei. 
2016-06-09 10:12:04		I've checked the sp's marketplaces in our current tree and they are with the new appconfig stuff (edited)
2016-06-09 10:12:56	⤷	In Django 1.9 all applications have to be loaded before any model is loaded
2016-06-09 10:13:29	⤷	Before we had factory imported in __inits, that didn't work with 1.9
2016-06-09 10:13:58	gadumitrachioaiei	sp_cdiscount doesn't use the new appconfig, in the bundle you gave us yesterday
2016-06-09 10:14:06	⤷	I changed it and I am testing now
2016-06-09 13:05:21	⤷	guys, I think something is wrong with our use of django 1.9
2016-06-09 13:05:39	⤷	sync_thesaurus ends with error on saving a thesaurus_line
2016-06-09 13:05:47	⤷	django.db.utils.ProgrammingError: can't adapt type 'dict'
2016-06-09 13:06:02	⤷	with django 1.8.3 it works fine
2016-06-09 13:06:33	⤷	it also works with django 1.9 if I set the json fields to None
2016-06-09 13:06:49	⤷	do you guys know about this problem ?
2016-06-09 14:19:06	clementidelon	We should use the new JSONField from Django
2016-06-09 14:19:06		in core_models/models.py: 15 
2016-06-09 14:19:06		- from pyMarketPlaces.fields import JSONField
2016-06-09 14:19:06		+ from django.contrib.postgres.fields import JSONField (edited)
2016-06-09 14:19:51	⤷	Please could you test on your sync_thesaurus ?
2016-06-09 14:25:33	⤷	actually in core_thesaurus/models.py
2016-06-09 15:00:12	gadumitrachioaiei	almost
2016-06-09 15:00:32	⤷	in pyMarketPlaces/fields.py
2016-06-09 15:00:46	⤷	if I replace the current version of JSONField
2016-06-09 15:00:48	⤷	with
2016-06-09 15:01:32	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1FEEK08J/-.py (Untitled)
2016-06-09 15:01:46	⤷	then things work
2016-06-09 15:02:10	⤷	this is so we deserialize the json from the db
2016-06-09 15:02:24	⤷	it seems that the procedure changed in django 1.9
2016-06-09 15:03:15	⤷	django 1.8 actually
2016-06-09 15:03:16	⤷	https://docs.djangoproject.com/en/1.9/howto/custom-model-fields/#converting-values-to-python-objects
2016-06-09 15:04:04	⤷	I don't understand why it doesn't work by overwriting to_python\
2016-06-09 15:04:09	⤷	let me check again
2016-06-09 15:06:25	⤷	no, it doesn't work by overwriting to_python
2016-06-09 15:06:39	⤷	it seems we have to overwrite:
2016-06-09 15:06:39		from_db_value
2016-06-09 15:06:52	⤷	should I keep the changes that I made ?
2016-06-09 17:29:43	clementidelon	Yes Gabriel, we will use your changes
2016-06-10 15:57:58	⤷	Hello,
2016-06-10 15:57:58		We have understood why the thesaurus was broken by the new JSONField. We used to pre-serialize data to string. Now with the new django field, it cares or serialization itself. We can use directly the new field by removing all the json.dump() calls in core_thesaurus/manager. I'll send you a bundle asap
2016-06-10 15:59:06	gadumitrachioaiei	ok
2016-06-10 16:10:05	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1FRD1M37/pymp.bundle (pymp.bundle) and commented: contains DJSONField fix
2016-06-10 16:29:55	bianca	Merci, we will integrate it
2016-06-13 12:00:43	muj_gabriel	hi guys, is there a special reason why we don't have any validation on marketplace_order_id and account_id in OrderActionSerializer?
2016-06-13 15:47:45	caixia	hello,  do you have an account (login & password) to connect to *AllYouNeed dev API*  https://ayn-api.mepa-home.de/dealerapi/xml?
2016-06-13 16:03:56	bianca	yes, so for accessing the test environment you have to access https://ayn-api.mepa-home.de/frontend/menu/dealer/home
2016-06-13 16:04:32	⤷	and to use in the displayed popup the username: dealer   and password: dealer4ayn
2016-06-13 16:21:12	amaxinas	We managed to create a merchant account which has these credentials:
2016-06-13 16:21:12		mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		We used this one to create products and handle orders.
2016-06-13 16:21:12		To view the products go here
2016-06-13 16:21:12		https://ayn-api.mepa-home.de/frontend/menu/dealer/myaccount/productmanagement/newproduct/listnewproduct?token=b465f4
2016-06-13 16:21:12		If, for some reason, you won't be able to see products with title TestLenXproduct, you need to go to Produkte, Neu Einstellen, enter TestLen in the first textbox and then click on the magnifying glass. This way you'll be able to see only the products created by us.
2016-06-13 16:21:12		After getting the products if you want to buy the product you have to take it's mp link because the search won't show our products. You can do that by hovering over the gear( often used as settings icon) and selecting Produktseite anzeigen: use this link to buy products with the other account(client)
2016-06-13 16:21:12		The client account has these credentials, but you might not be able to create orders anymore with it. Let me know and i'll try to create another one if it's not working.
2016-06-13 16:21:12		mailto:amaxinas@sharklasers.com (amaxinas@sharklasers.com)
2016-06-13 16:21:12		ChiarVreau2
2016-06-13 16:21:12		Go to the link obtained from the above procedure( ex.: https://ayn-api.mepa-home.de/frontend/testlen1product/p197109742/angebot/6272/ ), put it in the basket and go to the checkout. Use Rechnung method to pay for an order.
2016-06-13 16:23:04	bianca	We can do a share screen if you want with the flow for testing
2016-06-13 16:36:39	amaxinas	I've created another client account.
2016-06-13 16:36:39		mailto:amaxinas2@sharklasers.com (amaxinas2@sharklasers.com)
2016-06-13 16:36:39		ChiarVreau2
2016-06-13 16:36:39		If it asks for birthday, use 02 11 1989
2016-06-13 16:41:28	⤷	Also, that popup can be really annoying and it might pop several times one after another( the one that wants dealer/dealder4ayn as credentials)
2016-06-13 16:42:04	caixia	Thanks a lot, I will try with theses accounts
2016-06-13 16:42:48	amaxinas	I recommend opening links in new tabs because, sometimes, the pop up keeps on popping and eventually you end up with an error on the page and you need to reopen the link.
2016-06-13 16:42:48		Gook luck! (edited)
2016-06-13 17:26:59	caixia	Thanks @amaxinas , I got successfully the test Orders with the account mailto:bhuluban@pentalog.fr (bhuluban@pentalog.fr)  :slightly_smiling_face:
2016-06-13 17:28:13	amaxinas	:+1:
2016-06-14 15:37:52	caixia	hello, I have a question about *refund* action on orders (AllYouNeed), are these arguments: 'reduction_amount', 'delivery_amount', 'comment'  mandatory ?
2016-06-14 16:22:11	amaxinas	Hello! Their documentation states that the reduction_amount( how much money the merchant will retain from the order amount) is optional and if you don't set it all the money is refunded. 
2016-06-14 16:22:11		When we implemented this we decided that we have to ask for the reduction amount.
2016-06-14 16:22:11		Now, if you set it, you need to give a reason ("DAMAGED“, "USED" or "LOOK_IN_COMMENT"). For this we decided to use LOOK_IN_COMMENT but, if you set this reason, you have to provide a comment for the reason.
2016-06-14 16:22:11		delivery_amount (how much money from the delivery costs will the merchant give back to the client) is again optional but we decided we have to ask this amount also.
2016-06-14 16:22:22	⤷	I hope I explained it ok.
2016-06-14 16:26:02	bianca	yes, it was a Product Owner decision because allyouneed can have orders with multiple items, so it was considered that we should ask for the reduction amount
2016-06-14 16:40:23	caixia	thanks, I understood
2016-06-15 13:37:41	gadumitrachioaiei	we are developing a marketplace named wish, that doesn't have categories
2016-06-15 13:37:41		but sync_attributes doesn't work unless I first create a Thesaurus object in the database
2016-06-15 13:37:41		is this ok ?
2016-06-15 14:21:47	caixia	hello, yes, it's normal, there is a bug for this case, we will fix it, thanks. @gadumitrachioaiei
2016-06-17 13:30:23	alodin	Hello, I have some questions regarding one field mapping for order sync.
2016-06-17 13:30:23		The field is called common_country_iso_a2. This field should get a mapped string value corresponding to a country code of 2 or 3 characters. Right?
2016-06-17 13:30:23		But how should we deal the situation when from an order we receive for the country code a string with more than 3 characters. For example from wish sandbox I receive some orders with the country code 'test us'.
2016-06-17 13:30:23		How should I deal with this situation? Should I always test the received country code value and if the value is greater than 3, map the value to empty string.
2016-06-17 13:30:23		And another thing if the country code received from marketplace is lower case and we map this value to the common_country_iso_a2 will receive an error when calling set_order_address() method from core_orders/manager. Should I uppercase the country code value when mapping it to common_country_iso_a2 or can this be done from core?
2016-06-17 14:26:27	caixia	Hello @alodin ,  the field common_country_iso_a2 is necessary for shipping an order, so I suggest to add a table of correspondence between the Lengow country code and the marketplace country code in settings/base.py, then get the lengow iso code from this table when we set this value to the formatted order dictionary. 
2016-06-17 14:26:27		For the uppercase, it could be done in the core_orders.
2016-06-17 14:45:57	⤷	@alodin: In fact, we have already a table which contains all country information (iso code a2, iso code a3, name etc), you can ignore what I said about the table of correspondence,  we will create a function in helpers.py to manager iso code. you can set an empty string or None to this field until we finish the function.
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field so it
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit?
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them?
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-06-17 14:48:41	alodin	I encountered the problem when retrieved order country code from wish sandbox. for certain orders the country code was set as 'test us' a string different from a valid country code string of 2 or 3 chars
2016-06-17 17:54:47	clement.r	Hello @alodin, I've just pushed the util method to find an iso a2 code by country name, but it needs a real country name.
2016-06-21 16:05:45	gadumitrachioaiei	hi guys
2016-06-21 16:06:03	⤷	for beslist, this is how orders look like:
2016-06-21 16:06:03		http://codebeautify.org/jsonviewer/cb9b2fb3
2016-06-21 16:06:03		beslist_orders.json (http://codebeautify.org/jsonviewer/cb9b2fb3)
2016-06-21 16:06:03		No Description
2016-06-21 16:06:26	⤷	I don't know what to set as marketplace_order_line_id
2016-06-21 16:06:49	⤷	and core_orders always assumes this exists
2016-06-21 16:10:51	clementidelon	Hi! Looks like they give no ref to lines. I guess you could just concatene order_number with product index in list, like "BVB999990000-0", "BVB999990000-1"
2016-06-21 16:11:40	⤷	Do you know if they allow actions on order lines ?
2016-06-21 16:12:13	gadumitrachioaiei	I can do that, but it means we rely on the fact that the products will always be returned in same order
2016-06-21 16:12:34	⤷	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed.
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit?
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them?
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-06-21 16:12:34	gadumitrachioaiei	we don't implement order actions for beslist
2016-06-21 16:12:47	⤷	all doc that I have is for reading the orders
2016-06-21 16:13:21	clementidelon	If we don't have to act on a line, the order or the incapacity to choose a line should not be a problem
2016-06-21 16:14:49	gadumitrachioaiei	so it is ok to set marketplace_order_line_id like you suggested ?
2016-06-21 16:22:22	muj_gabriel	Hi guys, just a short question about product/variation deletion: When a product is removed from lengow from a marketplace, do you also remove the variants in the flux? (edited)
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed.
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit?
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them?
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-06-21 17:38:29	clementidelon	@gadumitrachioaiei: After checking with Caixia, the order line id is used for the updates on lines in core OrderManager.
2016-06-21 17:38:29		We could use "order_id-product_id" (seems to be "bvbCode" here) for the concatenation but it's not safe either if we have several order lines with the same product_id
2016-06-21 18:01:26	gadumitrachioaiei	yes, that is true
2016-06-21 18:04:42	⤷	if we don't set the field as immutable, than lines are deleted and added back in, so from this point of view missing marketplace_order_line_id would be ok
2016-06-21 18:05:14	⤷	for me the problem is at set_order_tracking that assumes there exists a marketplace_order_line_id
2016-06-22 14:09:08	ematifrea	@thomas.loiret: for the issue on today's demo for hitmeister ( action on orders) : the sync_orders is executed after each action, for the case when shipping, the status is updated immediately per the api response but when cancelling, the api response has the same status initially, it take few minutes for them to update it to "cancelled"
2016-06-22 14:54:11	thomas.loiret	ok, thanks for the update
2016-06-23 09:25:01	alodin	hello guys
2016-06-23 09:26:18	⤷	any idea where we can find offers sync documentation for beslist?
2016-06-23 09:35:05	thomas.loiret	yes, 1sec, I will give it to you
2016-06-23 10:56:22	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1KHGHS69/beslist_api_documentation.pdf (Beslist API documentation.pdf)
2016-06-23 10:56:50	⤷	@alodin: 1sec transformed into 1h, sorry about that ! Here is the documentation :slightly_smiling_face:
2016-06-23 10:57:08	⤷	Sandboxed environment https://test-shopitem.api.beslist.nl/api/doc
2016-06-23 10:57:08	alodin	no worries
2016-06-23 10:57:12	⤷	tank you
2016-06-23 10:57:26	thomas.loiret	And the key for the sandbox : 2a524dbd8595fb6bbb4b4341f2f95f44f2c228868c19111a8c65270aacffed5dc8905bf4
2016-06-23 10:57:58	⤷	There is also an online version : https://shopitem.api.beslist.nl/api/doc#get--auth-v1-shops
2016-06-23 10:58:04	alodin	we will analyze it today and add the user story for it
2016-06-23 10:58:09	thomas.loiret	but not as complete as the PDF
2016-06-23 10:58:12	⤷	ok, thanks
2016-06-23 10:58:22	alodin	ok, thank you very much
2016-06-24 10:38:55	ematifrea	@thomas.loiret: for idealo v2, on action on orders, there is marketplace_status and lengow_status in the db. which one should it be updated after performing an action?
2016-06-24 10:46:34	⤷	or maybe both? in the context that the order cannot be retrieved from the marketplace once an action was performed so a sync_orders command is futile
2016-06-24 10:53:08	clementidelon	Hi Ema,
2016-06-24 10:53:08		Both statuses have to be updated. The lengow status can be updated with the value given by OrdersManager.get_lengow_status(): this method uses the mp.xml to find the matching status
2016-06-24 10:57:20	ematifrea	Alright, thank you Clement
2016-06-28 17:41:26	bianca	Une bonne soiree :) a tous
2016-06-28 17:47:25	thomas.loiret	Bonne soirée Bianca :slightly_smiling_face:
2016-06-29 16:10:50	ematifrea	hello everyone :slightly_smiling_face: i have  a question on sync_orders mappings: what is the difference between commission and processing_fee in the OrderMarketplace model?
2016-06-29 16:19:15	⤷	for the case when i have a 'transactionFee' per order item, that should be mapped on 'processing_fee' for OrderMarketplace, accumulated?
2016-06-29 16:30:52	thomas.loiret	indeed, you  should add all transactionFee to processig_fee for OrderMarketplace
2016-07-01 11:46:33	ematifrea	Hi everyone, i'm expecting to save the delivery address on the order lines but i see in core OrderManager, from line 403 the reason why is not happening
2016-07-01 11:46:37	⤷	# Address for order
2016-07-01 11:46:37		            if addr_type in ['billing', 'contact']:
2016-07-01 11:46:37		                setattr(order, '{}_address'.format(addr_type), address)
2016-07-01 11:46:37		                order.save()
2016-07-01 11:46:37		            # Adress for lines
2016-07-01 11:46:37		            else:
2016-07-01 11:46:37		                for line in order.lines.all():
2016-07-01 11:46:37		                    line.delivery_address = address
2016-07-01 11:46:37		                    line.save()
2016-07-01 11:47:38	⤷	i think it should be an 'if addr_type == 'delivery'" instead of "else"
2016-07-01 11:49:38	⤷	can someone look into it and confirm?
2016-07-01 12:02:01	clementidelon	@adrientallot: please could you look into Ema's question
2016-07-01 12:10:32	adrientallot	Hello @ematifrea, a development is in progress to manage delivery address in the order line in the core manager. It will be push soon.
2016-07-01 12:12:54	ematifrea	ok, thank you, i'll keep the changes locally until the push
2016-07-01 15:50:37	muj_gabriel	@thomas.loiret: For bol marketplace after we sync products/offers we will get an report on the ftp server. In documentation it says that there we'll find errors related but with no example on how this file looks like. What should we do in this case?
2016-07-01 15:51:32	⤷	As described in doc: "The error report shows the number of items that has been approved (OK) and returns the number of items again that have not been approved (NOK)."
2016-07-01 16:02:02	thomas.loiret	I will ask http://Bol.com (Bol.com) for an example
2016-07-05 10:14:01	oleksandr	Hello. I have a few questions about cdon
2016-07-05 10:14:26	⤷	can someone help me?
2016-07-05 10:23:36	amaxinas	Hi! What would you like to know? :slightly_smiling_face:
2016-07-05 10:28:05	oleksandr	@amaxinas: there are 27 fields in the structure but in the xml file I found about one thousand. And I can't find any notation, is this attribute required or optional. Can you help me?
2016-07-05 10:29:40	amaxinas	@oleksandr: products structure?
2016-07-05 10:33:27	oleksandr	@amaxinas: yes, fields from optimised feed
2016-07-05 10:51:27	muj_gabriel	let me know when your at the desk...so I'll come and discuss about this
2016-07-05 10:56:14	oleksandr	@muj_gabriel: Hello, I'm here
2016-07-05 15:37:07	clementidelon	clementidelon shared a file: https://lengow.slack.com/files/amaxinas/F1NSFUK6K/-.py (Untitled)
2016-07-05 15:38:25	⤷	```
2016-07-05 15:38:25		Alexandru Maxinas: Hi! After we integrated the last bundle on our v3 version we had an issue with the JSON fields if you remember. We fixed this in our repo and also we removed json.dumps and json.loads as they are no longer required from pymarketplaces repo from bitbucket but it's on the bol_v3 branch, so not yet in dev.
2016-07-05 15:38:25		but maybe all of us should know and not use json.loads in process_order
2016-07-05 15:38:25		until the feature branch is not merged```
2016-07-05 15:39:49	⤷	It's a heads up from Alexandru about the new JSONField provided in Django 1.9
2016-07-05 15:40:16	⤷	Thanks @amaxinas
2016-07-06 09:24:57	ematifrea	Good morning,
2016-07-06 09:28:19	⤷	on the OrderManager, you have the attribute "merchant_product_id_value", can you please tell me how you are using it? I see it is set when constructing the order lines, its value is the last Sku/ean of the item as it keeps being overridden
2016-07-06 11:05:28	caixia	Good morning @ematifrea, this field takes the value of merchant product id value, usually, it's the product id value in the order lines, but some marketplaces have their own product id + the merchant product id, so they might return two product ids in the orders lines, this variable will take the one of merchant product id.
2016-07-06 11:14:36	ematifrea	thank you @caixia
2016-07-06 11:16:04	caixia	You are welcome :slightly_smiling_face:
2016-07-07 10:51:19	muj_gabriel	Hello...from the other side :slightly_smiling_face: For refund action on allyouneed I have to create an xml structure with each item that is refunded (with info about reimbursed_delivery_costs and reduction). Since this is per item, should the refund action be per line only?
2016-07-07 10:59:42	caixia	Hello @muj_gabriel , we can keep the possibility of refunding action by order id in our side, which means if there is only order id in the parameters, we get all lines of this order from our database and refund all lines in marketplace.
2016-07-07 11:02:04	muj_gabriel	In that case, how you will send the information related to reimbursed delivery costs and reduction per each item? If is relevant.. or should we just split the delivery costs by the number of order lines and put that value for each item?
2016-07-07 11:08:46	caixia	ah, if the reimbursed costs and reduction are related to the line, we should do refund action via line, so forget about what I said  :slightly_smiling_face:
2016-07-07 11:10:55	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1PH5QQBS/all_you_need_refund_xml.txt (all you need refund xml)
2016-07-07 11:11:32	⤷	This is a sample of xml that I should sent, we have orderId and productId (inside returnEntry)
2016-07-07 11:12:59	⤷	So my guess is that it's per order line, although you may have more returnEntry
2016-07-07 11:18:02	caixia	I think you are right, if the reduction is mandatory, it will be better reimbursed only by line.
2016-07-07 11:27:49	muj_gabriel	Thanks for the input @caixia
2016-07-07 11:37:12	caixia	you are welcome @muj_gabriel :wink:
2016-07-07 11:57:11	thomas.loiret	Restaurant booked for 12:45 :slightly_smiling_face:
2016-07-07 15:41:46	gadumitrachioaiei	sorry guys, but I still don't understand the difference between a product and a variation that I read from a lengow feed:
2016-07-07 15:41:46		can you explain this to me ?
2016-07-07 15:41:46		I think there are three situations:
2016-07-07 15:41:46		1. parent_sku is empty
2016-07-07 15:41:46		2. parent sku is equal to sku
2016-07-07 15:41:46		3. parent_sku is non empty and different than sku
2016-07-07 15:41:49	⤷	thanks
2016-07-07 15:53:15	adrientallot	Hello @ematifrea the modification about the management of the delivery_address by line is in the dev branch
2016-07-07 15:54:07	ematifrea	thank you @adrientallot i'll retest
2016-07-07 15:54:29	oleksandr	@gadumitrachioaiei: 1. sku is empty this is a product without variations. 2. parent_sku is equal to sku, this is a parent of products with variations. 3. parent_sku is non empty and different than sku - this is a variation of product
2016-07-07 16:07:07	gadumitrachioaiei	so in the second case, the product is not a real product, it only has variations ?
2016-07-07 18:07:15	⤷	guys
2016-07-07 18:07:37	⤷	i need to preserve some data that is related to a product feed
2016-07-07 18:08:37	⤷	basically, I upload an xml file with products to cdon mp, and they give me an import_id that I need to use next time I upload products
2016-07-07 18:08:53	⤷	do you know where I could save such data ?
2016-07-11 11:05:01	muj_gabriel	@thomas.loiret: Hello, I have configured your bitbucket repo with ssh but now I cannot access it anymore. Do you have restriction on ssh access to the repo? can you give us access also?
2016-07-11 11:07:47	thomas.loiret	I didn't change anything since last week, did you managed to access it when you were in Nantes ?
2016-07-11 11:29:31	muj_gabriel	In Nantes it was ok. Maybe we have some restriction here also...let us check first.
2016-07-11 11:33:58	bianca	it is from our side, I will create a ticket for opening the port
2016-07-11 11:37:05	thomas.loiret	ok :slightly_smiling_face:
2016-07-12 09:53:23	eboros	eboros has joined the group
2016-07-12 11:06:30	muj_gabriel	Hi guys, another question about order actions: Given an order with 3 order lines, all of them are in new status. If you ship on order line that will change it's status (order line status) to ship, the rest of them are still with new. Then if you want to ship the whole order, should we ignore the order lines that have different status then new?
2016-07-12 11:10:35	caixia	Hello @muj_gabriel, yes, we shold ignore the order lines not in new, because the marketplae may do not accept the ship action on a order line which is already in status *ship*.
2016-07-12 11:11:28	muj_gabriel	Okey, thanks
2016-07-12 11:11:54	caixia	you are welcome :slightly_smiling_face:
2016-07-12 11:22:35	clementidelon	You have and helper method in Core OrderManager.get_eligible_statuses(action), then you can check in your lines loop in the line is in required status
2016-07-12 13:09:55	gadumitrachioaiei	I wonder
2016-07-12 13:10:10	⤷	between two reads of lengow product feed
2016-07-12 13:10:19	⤷	can parent_sku change ?
2016-07-12 13:52:13	⤷	another question:
2016-07-12 13:52:13		I have a marketplace called cdon, that uses file upload to import products. I wonder: if a product is now ok on the marketplace and on lengow in ONLINE and I make another update with another xml file, that for this product produces an error ?
2016-07-12 13:52:13		will the product be fine on the mp using the old version of the product, or it will be taken offline by the mp, because it always uses the last version ?
2016-07-12 13:52:13		I need to know this so I know what status to save in our db.
2016-07-12 14:11:45	caixia	hi @gadumitrachioaiei , the status of product in Lengow means only if the product presents or not in marketplace, once we send the product successfully to the marketplace, the product is in status *online* even it has a error later.
2016-07-12 14:12:41	gadumitrachioaiei	I was wondering from the perspective of the mp, what it does, if it removes the product or just keeps its last coorect version
2016-07-12 14:13:02	⤷	first situation will mean that we have to update our status to offline
2016-07-12 14:13:19	⤷	second it means that we keep it online
2016-07-12 14:27:26	caixia	Generally, if the product do not exist anymore in the file to be sent, we consider it like a product to be removed from the mp, we will remove it from the db, then remove it also from mp (if mp allows removing products).
2016-07-12 14:33:52	gadumitrachioaiei	ok, I will keep it ONLINE even if I receive an error afterwards
2016-07-12 14:33:52		if the product is no longer on the feed, I need to delete it from the mp, but in cdon case ( with xml file ) I need more information, at least the parent_sku
2016-07-12 14:33:52		hence, it was my first question, if the parent_sku of a product can change
2016-07-12 14:33:52		but right now I am coding as if the parent_sku can change, meaning I will need extra queries in db ( a query per each produc that changes its parent_sku )
2016-07-12 14:51:18	caixia	Logically, no. For me, the notion of parent products and children's is to manager variations,  for example, a product could be in different colors, in this case, there will be one child product per color. Besides, the child products have common attributes which are their parents's attributes (Brand for example). If the child product change the parent_sku, it will be another product.
2016-07-12 14:52:15	gadumitrachioaiei	that makes sense
2016-07-12 14:52:34	⤷	so I can consider that parent_sku can not be changed ?
2016-07-12 14:53:43	caixia	Yes  for the moment. :slightly_smiling_face:
2016-07-12 14:53:55	gadumitrachioaiei	thanks
2016-07-12 14:54:20	⤷	maybe someone can write these things down, so it is clear for everyone
2016-07-12 14:54:36	⤷	it would also help avoid bugs or make it easier to be found
2016-07-12 14:55:35	caixia	You are right!
2016-07-12 15:40:11	gadumitrachioaiei	something I discovered, which I personally don't like
2016-07-12 15:40:22	⤷	ProductState table doesn't have a pk
2016-07-12 15:41:29	⤷	meaning that if I get a product, I update one of its properties, and issue save, it will create another product instead of updating the old one
2016-07-12 15:41:59	⤷	In [22]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		In [23]: p
2016-07-12 15:41:59		Out[23]: <ProductState: ProductState object>
2016-07-12 15:41:59		In [24]: p.additional_data
2016-07-12 15:41:59		In [25]: p.additional_data = {'a': 1, 'b': 2}
2016-07-12 15:41:59		In [26]: p.save()
2016-07-12 15:41:59		In [27]: p = ProductState.objects.get(product_id=102004)
2016-07-12 15:41:59		---------------------------------------------------------------------------
2016-07-12 15:41:59		MultipleObjectsReturned                   Traceback (most recent call last)
2016-07-12 15:42:46	⤷	I think we should make a primary key on ProductState to avoid these kind of things
2016-07-12 15:46:05	clementidelon	There is a helper class to manage product states and error
2016-07-12 15:46:26	gadumitrachioaiei	and additional data also ?
2016-07-12 15:47:28	⤷	can you tell me which class ?
2016-07-12 15:47:55	clementidelon	pyMarketPlaces.utils.errors.ErrorManager
2016-07-12 15:48:11	gadumitrachioaiei	but I want to use additional data
2016-07-12 15:48:18	⤷	I don't think I can use that ?
2016-07-12 15:48:22	⤷	or can I ?
2016-07-12 15:49:08	⤷	it seems specifically made for error management on products
2016-07-12 15:49:47	clementidelon	Yes I did not pay attention to this detail in your question, we are checking this point atm
2016-07-12 15:51:48	⤷	The table behind product_state is a trigger-driven multi key table, and Django ORM is not comfortable with this sort of things afaik
2016-07-12 15:52:08	gadumitrachioaiei	and if you guys don't want to use a pk, I think this should be documented as a warning, that you might create a product instead of updating an existing one
2016-07-12 15:52:31	⤷	I hope I didn't made two many bugs because of this, :disappointed:
2016-07-12 15:52:41	clementidelon	that's why we use raw sql to update this table
2016-07-12 15:52:59	⤷	actually we use a pk :wink:
2016-07-12 15:53:55	⤷	this is not product_id alone
2016-07-12 15:53:59	gadumitrachioaiei	pgadmin tells me: primrary key   <no primary key>
2016-07-12 15:54:08	⤷	also django tells me this
2016-07-12 15:58:13	caixia	ther is n ot a primary key in this table, but there is a primary key in the trigger table, and also a constraint
2016-07-12 15:58:46	gadumitrachioaiei	so you are telling me always use raw sql queries when working with ProductState ?
2016-07-12 15:58:53	⤷	no matter what I do ?
2016-07-12 15:59:11	⤷	I can see you guys for example use django when creating ProductState
2016-07-12 15:59:20	⤷	ProductState.objects.bulk_create(product_state_to_create)
2016-07-12 15:59:38	clementidelon	Yes
2016-07-12 15:59:48	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUZJAG7/script_to_create_the_trigger_table_in_db.txt (script to create the trigger table in db)
2016-07-12 16:01:14	gadumitrachioaiei	so you creating a new table for each feed, the first time I create  a ProductState object for a new feed ?
2016-07-12 16:01:25	⤷	or when will this happen ?
2016-07-12 16:02:11	caixia	yes, exactlly
2016-07-12 16:02:35	gadumitrachioaiei	so I must have made something wrong, because this is not true for me
2016-07-12 16:02:51	⤷	maybe because I used django instead of raw queries ?
2016-07-12 16:03:22	⤷	I need to check this
2016-07-12 16:04:11	caixia	once there is a new input to the table product state by feed, there will be another table product_state_<feed_id> created
2016-07-12 16:04:31	gadumitrachioaiei	thanks, let me check this
2016-07-12 16:04:40	caixia	ok, no problem
2016-07-12 16:08:59	gadumitrachioaiei	I created a new feed
2016-07-12 16:09:39	⤷	and a new product, I don't get a new table, but instead the product is put in main product_state table
2016-07-12 16:09:47	⤷	In [52]: feed = Feed(catalog_structure=catalog_structure, channel_structure=channel_structure, enabled=True)
2016-07-12 16:09:47		In [53]: feed.save()
2016-07-12 16:09:47		In [54]: http://feed.pk (feed.pk)
2016-07-12 16:09:47		Out[54]: 8
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: 
2016-07-12 16:09:47		In [55]: p = ProductState(catalog_feed_id=http://feed.pk (feed.pk), product_id=1, errors={}, status='offline')
2016-07-12 16:09:47		In [56]: p.save()
2016-07-12 16:10:04	⤷	is what I am doing ok, or not really ?
2016-07-12 16:22:41	⤷	could you give me a sample code, that works as it should ?
2016-07-12 16:23:05	⤷	so I can check what is wrong on my side ?
2016-07-12 16:24:27	caixia	caixia uploaded a file: https://lengow.slack.com/files/caixia/F1QUYR1LL/example_for_product_state_only.txt (Example for product state only)
2016-07-12 16:25:56	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default
2016-07-12 16:25:56		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/sp_mirakl/reports.py?at=dev&fileviewer=file-view-default)
2016-07-12 16:25:56		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:29:55	⤷	besides, the field  *additional_data* should/will be removed from the product state table (we use the field *errors* instead for storing the errors), why you need to use this field? @gadumitrachioaiei
2016-07-12 16:30:24	gadumitrachioaiei	for example, because I might need parent_sku of a product
2016-07-12 16:30:46	⤷	what was your intent for additional_data field ?
2016-07-12 16:32:48	⤷	in my case a sample xml file for cdon products looks like this:
2016-07-12 16:32:48		http://codebeautify.org/xmlviewer/cbaf54b5#
2016-07-12 16:32:48		cdon_products.xml (http://codebeautify.org/xmlviewer/cbaf54b5#)
2016-07-12 16:32:48		No Description
2016-07-12 16:33:07	⤷	so in order to delete a product, I need to set the status to DELETED
2016-07-12 16:33:28	⤷	however the product has a parent, and I need to provide the whole structure
2016-07-12 16:33:42	⤷	so I kind of need to also know the parent_sku
2016-07-12 16:34:46	caixia	Can you get this info from the feed downloaded from lengow?
2016-07-12 16:35:36	gadumitrachioaiei	from my understanding of the core code, we know if a product is deleted if it is present in the db but not in the lengow feed
2016-07-12 16:36:06	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70
2016-07-12 16:36:06		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/1a7a5a0c676bf7aa4a6d1fb4da13cbf666803180/core_products/products.py?at=dev&fileviewer=file-view-default#products.py-70)
2016-07-12 16:36:06		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-07-12 16:38:22	⤷	or I understand things wrong ?
2016-07-12 16:40:09	caixia	yes, sorry, you are right.
2016-07-12 16:41:14	⤷	We used the field *additional_data* to store the errors before, we did not think about this case :disappointed:
2016-07-12 16:42:44	gadumitrachioaiei	I didn't know this was its original purpose
2016-07-12 16:46:20	caixia	but maybe we can use this field to store product info, it's a good idea.
2016-07-12 16:47:57	gadumitrachioaiei	it wasn't my idea, :slightly_smiling_face:
2016-07-12 17:01:42	⤷	ok, so regarding the product_state underscore feed_id not being made, it was my fault
2016-07-12 17:01:48	⤷	i deleted the db
2016-07-12 17:01:56	⤷	and made it again, now it seems fine
2016-07-12 17:02:51	⤷	so I can actually manipulate the product_state objects only through raw sql?
2016-07-12 17:02:51		for example, for creating ProductState or updating additional_data ?
2016-07-12 17:07:40	⤷	I think as long as I create ProductState with bulk_create
2016-07-12 17:07:58	⤷	than I can use any django query, including update, as it seems to work fine
2016-07-12 17:15:55	caixia	Yes, you can try this, we need a refactory for the additional_data in our side
2016-07-12 17:17:12	gadumitrachioaiei	thanks
2016-07-12 17:17:57	⤷	but you should know that I need more complicated queries, so maybe just leave additional_data to be directly manipulated
2016-07-12 17:18:37	⤷	e.g.:
2016-07-12 17:18:37		I need to set the additional_data to {'parent_sku': 1, 'action': 'delete'}
2016-07-12 17:18:48	⤷	for products that need to be deleted
2016-07-12 17:19:28	⤷	and on the next sync_products I might need to unmark a product state as having to be deleted
2016-07-12 17:20:06	⤷	and I would do something like this, in order to preserve parent_sku but also unmark the product for deletion
2016-07-12 17:20:08	⤷	ProductState.objects.all().update(additional_data=F('additional_data') - 'action')
2016-07-12 17:21:34	caixia	Yes, thanks for remind :slightly_smiling_face:
2016-07-13 15:44:07	gadumitrachioaiei	if we receive a product with children from lengow feed
2016-07-13 15:44:17	⤷	the quantity for it will be set ?
2016-07-13 15:44:31	⤷	if so, it is the sum of quantities of the children ?
2016-07-13 15:46:24	thomas.loiret	you will have a quantity per (children) product, it will not be the sum
2016-07-14 10:55:36	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1RLLPGHX/-.txt (Untitled)
2016-07-14 10:56:19	⤷	Hi guys, the code above gives error if COMPANY_NAME or DATA_HOLDER is not defined in marketplace settings. Should we define those or are they optionals?
2016-07-15 09:22:45	thomas.loiret	Hi Gabi, those are mandatory, in order to automate our process, we add the creation of the holder during the sync_thesaurus
2016-07-15 17:10:55	⤷	Bol answer about the orders :
2016-07-15 17:11:07	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1S56T5G8/-.txt (Untitled)
2016-07-15 17:28:22	bianca	so the idea is that we have actions per order line
2016-07-15 17:29:07	⤷	not per oreder, and we do not verifiy the status of the order before to make the action but the status of the order line
2016-07-15 17:30:53	thomas.loiret	yes
2016-07-15 17:46:55	bianca	Thomas, when we have sync attributes and the attributes are per category, how should look the database? should we have as result of sync only a generated xml on the root row or xmls per each category?
2016-07-15 17:57:03	thomas.loiret	you should have only 1 generated xml with everything in it
2016-07-15 18:02:15	bianca	ok, thx
2016-07-18 13:50:31	gadumitrachioaiei	guys
2016-07-18 13:52:35	⤷	when we can post more than one image for a product, how should we do it ?
2016-07-18 13:52:35		use several attributes, e.g.: image1, image2, etc
2016-07-18 13:52:35		or use a single attribute of type string, that should be some urls separated by a symbol, like comma or pipeline
2016-07-18 14:00:22	thomas.loiret	@gadumitrachioaiei:  you should use several attributes
2016-07-18 14:45:08	gadumitrachioaiei	I have two attributes that are just weird, in my opinion we should not use them
2016-07-18 14:45:58	⤷	<Column name="ProductNumber" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:45:58		<Column name="ProductId" type="string" i18n="NotLocalized">
2016-07-18 14:45:58		          <Documentation />
2016-07-18 14:45:58		        </Column>
2016-07-18 14:46:18	⤷	besides those we also have product sku, and product ean
2016-07-18 14:46:28	⤷	so I have no idea what they are used for
2016-07-18 14:46:46	⤷	nor do I know where exactly to put them in the final xml
2016-07-18 15:39:35	⤷	guys, attributes per category don't seem to be present in xml schema that cdon uses to read the xml file with the products
2016-07-18 15:40:32	⤷	for example I have as attribute CompressionGarmentType, an attribute for Clothing category, that doesn't have a correspondent in xml schema, hence I don't know what to do with it
2016-07-18 15:40:57	⤷	cdon docs and examples and testing sucks big time
2016-07-18 16:02:18	ematifrea	hello, i see some modifications on the db, in my case, on orders part, where can I find the db schema dump? thanks
2016-07-20 08:52:43	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TAYNQEA/lengow-dev-lengow_db-c145ba6962c2.tar.gz (lengow-dev-lengow_db-c145ba6962c2.tar.gz)
2016-07-20 08:53:00	⤷	@ematifrea: the latest version of the db schema
2016-07-20 08:54:01	ematifrea	Thank you
2016-07-20 09:00:49	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1TB8SZTR/idealo_attributes_v2.csv (idealo_attributes_v2.csv)
2016-07-20 09:59:40	gadumitrachioaiei	hi guys
2016-07-20 09:59:40		I noticed that we have a mismatch between a column name in the database and the attribute under which we try to save it
2016-07-20 09:59:40		OrderMarketplace model has this property:
2016-07-20 09:59:40		marketplace_customer_id = models.TextField(blank=True, null=True)
2016-07-20 09:59:40		but core_orders.manager.py
2016-07-20 09:59:40		tries to save customer_id like this:
2016-07-20 09:59:40		order.customer_id = order_dict.get('customer_id')
2016-07-20 10:17:08	sebastien.charret	Yeah, we also figured out
2016-07-20 10:17:21	⤷	we need to make some refacto
2016-07-20 10:18:18	⤷	but u r right, we need to follow and keep a good code rules 
2016-07-20 10:21:54	⤷	Tomorrow we'll speak about it and take a decison for which name (marketplace_customer_id || customer_id) to use
2016-07-20 16:32:33	alodin	(deleted)
2016-07-20 16:43:53	gadumitrachioaiei	in core_products._check_required_is_present I propose that the function returns bool, as indication if things are fine or not
2016-07-20 16:54:04	alodin	@thomas.loiret: So we have analyzed the Attributes on CDON again and based on the documentation we identified the following attributes which are used in products synchronization:
2016-07-20 16:54:04		SKU, ParentSKU, TaricNumber, Title, Description, ProductClass, BrandName, FrontImage, ExtraImage1, ..., ExtraImage6,
2016-07-20 16:54:04		GTIN, VAT, CurrentPrice, OrdinaryPrice, InStock, CatalogColor, CatalogSize, ManufacturerArticleNumber, FreightClass,
2016-07-20 16:54:04		ReleaseDate, Sellable, ShippingDeliveryMin, ShippingDeliveryMax
2016-07-20 16:54:04		Height, Length, Width, Weight
2016-07-20 16:54:04		So should we use only those attributes as COMMON_ATTRIBUTES add perform the attributes sync only for those, and not take into consideration category attributes at all?
2016-07-20 16:54:04		For the ExtraImages attributes how many of them should we add? 1, 2 ...
2016-07-21 08:50:06	gadumitrachioaiei	good morning
2016-07-21 14:53:19	⤷	I have to make attributes for fyndiq
2016-07-21 14:53:41	⤷	it seems the merchant can upload up to 50 images per product
2016-07-21 14:53:42	⤷	product-image-n-url
2016-07-21 14:53:42		URL to the n'th product image. There can be a maximum of 50 images associated with the same product. So the maximum allowed column name here would be "product-image-50-url"
2016-07-21 14:54:03	⤷	How should we handle these kind of things ?
2016-07-21 14:58:14	sebastien.charret	Hello
2016-07-21 14:58:24	⤷	what is the minimum required?
2016-07-21 14:59:03	⤷	(50 is a quite a lot)
2016-07-21 14:59:24	gadumitrachioaiei	one
2016-07-21 15:00:38	sebastien.charret	In my opinion at least one image product is the minimum, we can eventually offers to our partner three images to upload
2016-07-21 15:00:58	gadumitrachioaiei	thanks
2016-07-21 15:01:03	sebastien.charret	np
2016-07-21 15:18:33	gadumitrachioaiei	if the merchant should choose a value for a category of the product, I suppose we won't make an attribute of type list, no?
2016-07-21 15:18:41	⤷	there can be thousands of categories
2016-07-21 15:46:35	sebastien.charret	Do you have already made sync thesaurus?
2016-07-21 16:07:49	gadumitrachioaiei	yes
2016-07-21 16:11:34	sebastien.charret	ok so if your marketplace return a field which is use to map category (it's seems so), everything is already made\
2016-07-21 16:12:31	gadumitrachioaiei	I have this:
2016-07-21 16:12:31		{
2016-07-21 16:12:31		            'id': 'product-category-fyndiq-id',
2016-07-21 16:12:31		            'name': 'Fyndiq category id',
2016-07-21 16:12:31		            'description': 'Id of the Fyndiq category this product is part of.',
2016-07-21 16:12:31		            'type': 'integer',
2016-07-21 16:12:31		            'use': 'optional'},
2016-07-21 16:12:49	sebastien.charret	during the matching we will use a back_office tools, masked to the merchant, to choose which field will be use to contain the categories
2016-07-21 16:13:03	gadumitrachioaiei	interesting
2016-07-21 16:14:43	sebastien.charret	so we'll scan the categories and offer at the merchant to make a matching
2016-07-21 16:15:23	⤷	after that the only thing we need to do is to know which field is use as category field in the lengow feeds
2016-07-21 16:16:14	gadumitrachioaiei	:+1::skin-tone-4:
2016-07-21 16:16:45	sebastien.charret	in your case it'll be product-category-fyndiq-id, during the creation of sync_product you'll get it and use it to populate the field required by the marketplace
2016-07-22 11:24:18	gadumitrachioaiei	hi
2016-07-22 11:24:43	⤷	I am doing sync_attributes, but I don't have attributes per category
2016-07-22 11:25:02	⤷	and yet, the core retrieves every category from the database
2016-07-22 11:25:03	⤷	< 2016-07-22 05:22:31.778 EDT >LOG:  statement: SELECT "thesaurus_line"."id", "thesaurus_line"."channel_thesaurus_id", "thesaurus_line"."parent_id", "thesaurus_line"."channel_code", "thesaurus_line"."labels", "thesaurus_line"."topic", "thesaurus_line"."breadcrumb", "thesaurus_line"."metadata", "thesaurus_line"."custom_attributes", "thesaurus_line"."conversion_list_values" FROM "thesaurus_line" WHERE ("thesaurus_line"."channel_thesaurus_id" = 2 AND "thesaurus_line"."parent_id" = 7284)
2016-07-22 11:25:03		< 2016-07-22 05:22:31.783 EDT >LOG:  duration: 4.543 ms
2016-07-22 16:26:10	⤷	guys, I have thoughts about sync_products, maybe you guys can clarify things for us and maybe you will find the use cases we stumbled upon useful
2016-07-22 16:27:00	⤷	gadumitrachioaiei uploaded a file: https://lengow.slack.com/files/gadumitrachioaiei/F1U8D8YEL/products.txt (products.txt)
2016-07-25 15:17:34	⤷	hi guys
2016-07-25 15:17:43	⤷	so regarding these things:
2016-07-25 15:17:45	⤷	This has the following consequences for our product checker:
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:45		A parent product has to be checked only for attributes specific to a parent product, for example don't check it for price.
2016-07-25 15:17:45		A simple product has to be checked for all necessary attributes.
2016-07-25 15:17:58	⤷	Did I understand correctly ?
2016-07-25 15:20:29	sebastien.charret	its depend how your marketplace manage (wait) the products are sended (as independant product - no relationship notion or like your above example). I think in your case you are good
2016-07-25 15:24:20	gadumitrachioaiei	I am interested in how the lengow feed sends me the products
2016-07-25 15:24:37	⤷	will a parent product have a price on it ?
2016-07-25 15:25:07	⤷	will the child products contain all properties, for example: title, description
2016-07-25 15:27:19	⤷	I am interested in the checker
2016-07-25 15:27:43	⤷	if the price is mandatory for a mp
2016-07-25 15:28:02	⤷	I won't check a parent product coming from lengow for price, no ?
2016-07-25 15:28:11	⤷	I will check for price a=only child products ?
2016-07-25 15:29:49	⤷	so the checker should behave differently for a parent product and for a child product, no ?
2016-07-25 15:30:58	clementidelon	Yes, parents and children have to be tested for their respectively used attributes
2016-07-25 15:32:24	⤷	And finally data integrity have to be checked, (e.g children attached to an invalid parent have to be removed from the valid products, and parent product with only invalid chidlren has to be removed too)
2016-07-25 15:36:12	⤷	So as Sebastien said, it depends heavily on how the products have to be transformed for the marketplace (in the transformer)
2016-07-25 15:36:20	gadumitrachioaiei	so price is to be checked oly for simple products and child products
2016-07-25 15:36:26	clementidelon	depends
2016-07-25 15:36:49	gadumitrachioaiei	description title is to be checked for parent products and simple products, if it comes for the child, also check for it
2016-07-25 15:37:00	⤷	depends on what ?
2016-07-25 15:37:45	clementidelon	It depends of what is used by the mkp, sometimes the info comes from parent, sometimes from child
2016-07-25 15:40:36	gadumitrachioaiei	so cdon asks for price to be mandatory for simpple products and child products
2016-07-25 15:41:00	⤷	how will we set the price attribute ?
2016-07-25 15:41:05	⤷	as optional or required ?
2016-07-25 15:49:17	⤷	if I put it as mandatory, I supose that somehow you guys know not to ckeck for partent products on your side
2016-07-25 15:49:52	⤷	and I will know that I need to check it as manadatory only for simple and child products
2016-07-25 15:50:05	⤷	is this how the workflow is supposed to work ?
2016-07-25 16:05:34	⤷	do sp_mirakl complaint marketplaces have only simple products ?
2016-07-25 16:06:43	⤷	I am asking because we check for price to be mandatory for all products
2016-07-25 16:08:22	⤷	and I meant compliant not complaint, :smile:
2016-07-25 16:22:06	clementidelon	In facts price is found on parent products too most of the time in input customer feeds. I guess it's just a shortcut done in the mirakl checker, which is one of the first checkers done in the v3, and could probably be enhanced
2016-07-25 16:23:33	gadumitrachioaiei	bianca has an idea
2016-07-25 16:24:25	⤷	she thinks that all products coming from lengow feed will look the same
2016-07-25 16:24:25		meaning that you guys only send us variations that also contain common parent information
2016-07-25 16:25:52	⤷	you don't sent parent products
2016-07-25 16:25:52		and our job might be, if mp requires, to separate the attributes ( the parent ones and the child ones ) so that we know how to send them to mp
2016-07-25 16:25:58	⤷	is she right ?
2016-07-25 16:27:41	⤷	in this case, the checker should indeed behave uniformly, no distinction between parent and child product
2016-07-25 16:30:52	⤷	no, this is not right either
2016-07-25 16:31:41	⤷	can someone write some doc chow the lengow feed is formed ?
2016-07-25 16:32:00	⤷	on confluence where we can all contribute, or on a forum ?
2016-07-25 16:37:44	anavoda	anavoda has joined the group
2016-07-25 16:40:37	caixia	hi, firstly, the lengow feed is not the same for the different marketplace.  The Lengow feed is the merchant catalog pre-adapted to the format of product required by the Marketplace, for example, the attribute price, in the merchant catalog, they name it like 'PRODUCT_PRICE', but the Marketpace excepts 'PRICE', so the merchant must do that mapping in lengow plateforme, then in the lengow feed, there are  the field 'PRICE' in stead of 'PRODUCT_PRICE'.
2016-07-25 16:43:11	gadumitrachioaiei	I will make the checker behave differently for a child product and a parent product
2016-07-25 16:43:34	⤷	but just for you to know, all the other marketplaces That I looked at don't do this
2016-07-25 16:43:49	clementidelon	The workflow depends on the marketplace once again :slightly_smiling_face:
2016-07-25 16:43:49		Start with the expected marketplace message
2016-07-25 16:43:49		Then in the transformer => which data comes from the parent, witch one comes from the children ?
2016-07-25 16:43:49		Then report all checking in the checker just to avoid to later transform incorrect products and apply them on the source product type, this to avoid removing correct products (e.g a parent that has no price,  but is otherwise correct, has to be validated if the price comes from the children)
2016-07-25 16:43:52	gadumitrachioaiei	and I know for usre that price is not mandatory for a parent product
2016-07-25 16:44:06	⤷	so I don't understand how they pass the checker
2016-07-25 16:44:49	clementidelon	It has to be changed, thanks for your insight
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:34:51	amaxinas	(deleted)
2016-07-27 08:39:38	⤷	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant?
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed.
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit?
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them?
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-07-25 16:57:42	rmcimpean	rmcimpean has joined the group
2016-07-25 17:07:17	thomas.loiret	Hi Mihai :slightly_smiling_face:
2016-07-25 17:08:29	rmcimpean	Hello everybody :slightly_smiling_face:
2016-07-25 17:28:59	sebastien.charret	hello
2016-07-25 17:29:45	clementidelon	Hi !
2016-07-25 17:49:42	caixia	hi
2016-07-26 09:23:40	bianca	Good morning, as we said at the daily meeting, it will be valuable if we will have the structure for the products sent for V3 Hitmeister and Alyouneed in order to have a good quality for sync_attributes
2016-07-26 09:23:44	⤷	Thank you
2016-07-26 09:32:51	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V48TMRQ/hitmeister_attributes_v2.csv (hitmeister_attributes_v2.csv)
2016-07-26 09:32:52	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1V3S2RAL/allyouneed_attributes_v2.csv (allyouneed_attributes_v2.csv)
2016-07-26 09:33:12	⤷	keep in mind that those data may be outdated
2016-07-26 14:00:07	amaxinas	I looked a bit over the hitmeister csv and it seems that we only have to build the common attributes, right? 
2016-07-26 14:00:07		There are also ihr_attribut, ihr_attribut2 and ihr_attribut3; are these merchant attributes? 
2016-07-26 14:00:07		They don't seem to be connected to any category, but how should we handle this? Just create three dictionaries in the list of attributes with name ihr_attribut, ihr_attribut2, ihr_attribut3?
2016-07-26 14:00:07		In their documentation they are stating that you can set as many attributes as you want but then you have to give the name of the attribute and the value, so what should ihr_attribut be mapped to? The name of the attribute or the value? I'm asking so that we know what to write in the description of the attribute.
2016-07-26 14:04:00	gadumitrachioaiei	I need to know if we have attributes per category or just common so I know how to write the tests
2016-07-26 14:06:09	sebastien.charret	@amaxinas in the documentation you don't find any reference of ihr_attribute?
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:46:46		Allegro.pl - Więcej niż aukcje. Najlepsze oferty na największej platformie handlowej. (http://allegro.pl/webapi/documentation.php/show/id,113)
2016-09-13 09:46:46		Allegro - najwięcej ofert w jednym miejscu. Radość zakupów i 100% bezpieczeństwa dla każdej transakcji. Kup Teraz!
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:52:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29)
2016-09-13 09:52:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:25		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default)
2016-09-13 10:02:25		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:46:46		Allegro.pl - Więcej niż aukcje. Najlepsze oferty na największej platformie handlowej. (http://allegro.pl/webapi/documentation.php/show/id,113)
2016-09-13 09:46:46		Allegro - najwięcej ofert w jednym miejscu. Radość zakupów i 100% bezpieczeństwa dla każdej transakcji. Kup Teraz!
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:52:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29)
2016-09-13 09:52:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:25		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default)
2016-09-13 10:02:25		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:46:46		Allegro.pl - Więcej niż aukcje. Najlepsze oferty na największej platformie handlowej. (http://allegro.pl/webapi/documentation.php/show/id,113)
2016-09-13 09:46:46		Allegro - najwięcej ofert w jednym miejscu. Radość zakupów i 100% bezpieczeństwa dla każdej transakcji. Kup Teraz!
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:52:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29)
2016-09-13 09:52:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:25		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default)
2016-09-13 10:02:25		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:46:46		Allegro.pl - Więcej niż aukcje. Najlepsze oferty na największej platformie handlowej. (http://allegro.pl/webapi/documentation.php/show/id,113)
2016-09-13 09:46:46		Allegro - najwięcej ofert w jednym miejscu. Radość zakupów i 100% bezpieczeństwa dla każdej transakcji. Kup Teraz!
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:52:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29)
2016-09-13 09:52:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:25		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default)
2016-09-13 10:02:25		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-07-26 14:08:57	amaxinas	@sebastien.charret:  ihr attribut means their attribute, so not really, but I guess ihr_attribut reffers to merchant custom attributes
2016-07-26 14:09:11	sebastien.charret	"You can add as many columns for attributes that go beyond the columns already named by us . For example, Screen size , operating system, etc."
2016-07-26 14:10:14	⤷	i don't know the documentation
2016-07-26 14:11:16	⤷	but its seems that this field bears the custom attributes
2016-07-26 14:11:41	amaxinas	https://www.hitmeister.de/api/v1/?page=product-data-files#user-defined-attributes
2016-07-26 14:12:04	sebastien.charret	which can be pass as follow ihr_attribut : '{'foo': bar, 'toto': titi}'
2016-07-26 14:12:26	⤷	and from their side they managed them
2016-07-26 14:14:17	⤷	ok
2016-07-26 14:21:31	amaxinas	I'm not sure we should pass data like that. :slightly_smiling_face:
2016-07-26 14:21:31		In their example they just add two new columns and put string values for them in the csv rows (Hohe, Lange).
2016-07-26 14:21:31		So, maybe ihr_attribut, ihr_attribut2 and ihr_attribut3 were put so you can put your custom column values(up to three) but where do the custom column names come from?
2016-07-26 14:21:31		Just to be sure, we need to know if we need to only implement common attributes for hitmeister or attributes per category as it says in our redmine task in a way that it's useful. :slightly_smiling_face:
2016-07-26 14:36:58	bianca	@thomas.loiret regarding Hitmeister V3 Attributes, when I analyzed the user story I asked if we need to sync via api per category(the marketplace gives this option) but now we received the V2 structure that seems with common attributes; What flow should we consider in this case?  Also it seems that we can have shop custom attributes- should we consider them, how should we add them in sync_attributes giving the fact that are specific per merchant?
2016-07-26 15:38:30	amaxinas	@bianca: I don't know if they are shop common attributes. In their documentation it says 'User-defined attributes', they don't seem to depend on any category.
2016-07-26 15:38:30		@all do you happen to know how we should handle this or should we wait?
2016-07-26 15:39:46	⤷	!channel: .
2016-07-26 15:54:03	thomas.loiret	@amaxinas: Don't consider shop attributes. I gave you the v2 structure because you ask for, but as always, you should follow the official documentation, if Hitmeister provides attributes per category by API and you can exploite them into the sync_products/sync_offers, then yes, you should use them :slightly_smiling_face:
2016-07-26 15:54:33	bianca	great, ok thx
2016-07-26 16:49:33	ematifrea	@thomas.loiret: when you have a moment, please take a look on the idealo attributes xml http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml thank you :slightly_smiling_face:
2016-07-26 16:49:33		Redmine Lengow (http://79.141.1.171:10083/attachments/download/119/idealo_attributes.xml)
2016-07-26 16:49:33		Redmine
2016-07-26 18:04:45	thomas.loiret	@ematifrea: seams good, but there not much required attributes, for example the price and the name are optional, are you sur about that ?
2016-07-26 18:11:13	ematifrea	Not entirely sure, today i asked on the daily what shall i put there as i don't have that info. We agreed on "optional". Surely, name and price should be mandatory, I'll change it :)
2016-07-26 18:12:20	bianca	I just found a documentation about offers Idealo, seems that we will be able to gather from that doc the info regarding what is optional and what is required
2016-07-26 18:12:53	⤷	there are talking about offers(but seems that there are all the fields) so I suppose that it is an offer with all the fields in it
2016-07-26 18:14:38	⤷	http://blog.idealo.de/direktkauf/wp-content/uploads/sites/24/2016/03/webservice-angebotsaktualisierungen_1_7_EN-16032016_incl_E-Commerce.pdf
2016-07-26 18:14:58	⤷	we will adjust the structure with info from the document
2016-07-27 08:39:38	amaxinas	Good morning! I've just attached the attributes xml for allyouneed
2016-07-27 08:39:38		http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml
2016-07-27 08:39:38		Please take a look when you have time.
2016-07-27 08:39:38		Redmine Lengow (http://79.141.1.171:10083/attachments/download/120/allyouneed_attributes.xml)
2016-07-27 08:39:38		Redmine
2016-07-27 10:58:06	⤷	!channel: I have a question regarding Hitmeister. We have a test production account to use provided by you. Method create_attribute_manager from core factory( pyMarketPlaces/base.py) doesn't accept an account_id as parameter but most of the mps override it to accept account_id; create_thesaurus_manager has account_id in it's definition. In this case, is it ok to store the keys( needed for the api calls) in the settings file and use them for sync of thesaurus and attributes so that we don't have to provide an account id or should we always ask for account_id? Or maybe for sync thesaurus and attributes we can use the settings of the .first() AccountConfig object as they are not account dependant? (edited)
2016-07-27 14:52:45	ematifrea	hello, one question regarding attributes sync: seems for the case when the holder doesn't have any thesaurus, the structure name is None, so it ends up in logging "create structure: None" and of course, on entry in the structure table on name column. Can you confirm this is the desired behavior? thank you
2016-07-27 14:57:48	clementidelon	@ematifrea: It is indeed the expected behavior :slightly_smiling_face:
2016-07-27 14:58:31	ematifrea	Thank you, means i'm done :slightly_smiling_face:
2016-07-27 15:22:55	gadumitrachioaiei	HolderBusinessLine doesn't have an id  column, and django needs it
2016-07-27 15:22:55		ProgrammingError: column holder_business_line.id does not exist
2016-07-27 15:22:55		this happens when I am trying to make a test that wants to delete a Holder in the teardown method
2016-07-27 15:32:35	caixia	hello @gadumitrachioaiei , yes, django need an id, we will ask our DBA to add the column id in the table holder_business_line, thanks :slightly_smiling_face:
2016-07-27 15:42:33	gadumitrachioaiei	when trying to delete an account with django orm I get:
2016-07-27 15:42:33		ProgrammingError: relation "operation_history" does not exist
2016-07-28 10:55:03	oleksandr	Hello
2016-07-28 10:55:19	⤷	When you developed Ricardo did you use certificate to connect to VPN?
2016-07-28 11:09:42	bianca	Here are the information’s needed for the VPN-access:
2016-07-28 11:09:42		VPN-Installer
2016-07-28 11:09:42		o Windows https://sky.qxlricardo.com/owncloud/index.php/s/65pyjYMD1CpAqYQ
2016-07-28 11:09:42		o Linux https://sky.qxlricardo.com/owncloud/index.php/s/eOujk1smiuIkFFi
2016-07-28 11:09:42		Server-URL: http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:09:42		User-ID: ssl_lengow
2016-07-28 11:09:42		Password: 3efR*StuMu
2016-07-28 11:11:02	oleksandr	Did you use a solution for Linux?
2016-07-28 11:11:23	gadumitrachioaiei	I used something else, because that didn't work for me
2016-07-28 11:11:27	oleksandr	There is a mandatory argument with certificate
2016-07-28 11:11:36	gadumitrachioaiei	let me remember how I connected
2016-07-28 11:12:24	oleksandr	I tried to use a standard network manager, but it didn't work
2016-07-28 11:13:48	gadumitrachioaiei	I have fedora 23
2016-07-28 11:14:03	⤷	I installed:
2016-07-28 11:14:03		openconnect-devel-7.06-2.fc23.x86_64
2016-07-28 11:14:03		openconnect-7.06-2.fc23.x86_64
2016-07-28 11:14:23	⤷	then the command to connect is:
2016-07-28 11:14:23		sudo openconnect --juniper  http://vpn.qxlricardo.com (vpn.qxlricardo.com)
2016-07-28 11:14:43	⤷	it will only ask for user and password, which are the ones above
2016-07-28 11:15:38	oleksandr	thanks, I'll test with your solution
2016-07-28 11:18:52	⤷	@gadumitrachioaiei: Thank you, this solution work [:+1:1]
2016-07-28 11:19:38	bianca	I will add it to the documentation
2016-08-01 15:14:53	muj_gabriel	Hi guys,
2016-08-01 15:14:53		We just noticed that you did some changes to the connector: 
2016-08-01 15:14:53		- first CommandResponse class was moved inside HttpConnector, we can keep it ouside the class as I doesn't really matter the location; right now it breaks a lot of tests and we need to update them (along with import path)
2016-08-01 15:14:53		- why commands, base_url and default_session_format attributes were moved inside init, since all of this are related to class (marketplace), not the instance itself.
2016-08-01 16:52:10	thomas.loiret	Hi Gabi,
2016-08-01 16:52:10		- for CommandResponse, we will move it outside HttpConnector, that's not an issue for us
2016-08-01 16:52:10		- commands, base_url and default_session_format attributes were moved inside the init because we have a case were it is related to the instance. We got 2 markeplaces: CDiscount and GoSport, both of them use the same API that is why there is `sp_cdiscount` but they use different API endpoints because it is 2 differents marketplaces, so we need to a "CDiscount generic connector" and inside this connector we use the slug (in the `__init__`) to dynamicaly find the right endpoint
2016-08-01 16:52:53	⤷	We got the same case with all Mirakl marketplaces, all these marketplaces use the same `sp_mirakl` but they have different endpoints (edited)
2016-08-02 10:12:26	muj_gabriel	I have a proposal regarding on how to get base url dinamically (because that is the issue from what I understood):
2016-08-02 10:12:26		We can just have 2 new methods inside the generic connector:
2016-08-02 10:12:26		- get_base_url and get_commands that by default returns self.BASE_URL and self.COMMANDS (to keep backwards compatibility)
2016-08-02 10:12:26		- sp_cdiscount and sp_mirakl will define this methods as follow
2016-08-02 10:12:26		 * get_base_url(): return CdiscountAppConf.get_attribute(self.slug, 'URL') # sample from cdiscount
2016-08-02 10:12:26		 * get_commands(): return CdiscountAppConf.get_attribute(self.slug, 'COMMANDS') # sample from cdiscount
2016-08-02 10:12:26		- for respose format we can have a method also (if needed)
2016-08-02 10:12:26		What do you guys think? It will be just a small change in sp_cdiscount and sp_mirakl to define this methods and we are all good
2016-08-02 10:34:31	caixia	Hello, in this case, we will have a problem to get dynamically inside of  the connector,   for example, the base url may be different in function of action in the connector (e.g: the url for getting thesaurus is different of the one to get orders -> the case of sp_cdiscount), but we overwrite only once the function get_base_url  in the connector, which means we will get only one base_url.   ( I hope I explain clearly the problem)
2016-08-02 10:39:52	muj_gabriel	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XATKW3U/-.txt (Untitled)
2016-08-02 10:40:49	⤷	Changing an attribute inside of a function is not a good practice. In this case better to add support for base_url in COMMANDS dictionary
2016-08-02 10:44:23	⤷	We can also have the signature of get_base_url with action parameter as we have in get_headers
2016-08-02 10:44:47	⤷	and based on the action you can return different base_url
2016-08-02 10:46:11	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XAC7BTJ/Untitled.txt (Untitled)
2016-08-02 10:48:47	⤷	the idea is to have 1 entry point where we get base url and not change instance attributes in many places.
2016-08-02 10:50:09	caixia	Yes, I agree with you :slightly_smiling_face:
2016-08-02 15:22:37	clementidelon	@muj_gabriel: Hi Gabriel, could you have a look at this PR : https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/36
2016-08-02 15:22:37		and tell us if it's ok for you ? (edited)
2016-08-02 15:35:55	muj_gabriel	Looks better, we may want to make holder_slug mandatory and get BASE_URL, COMMANDS and DEFAULT_RESPONSE_FORMAT from settings using AppConf.
2016-08-02 15:36:11	⤷	just as a thought...
2016-08-02 15:36:46	⤷	I think right now we actually use BASE_URL from settings and COMMANDS from datas and we can move it inside settings file (edited)
2016-08-02 16:40:27	clementidelon	yes COMMANDS has to be in settings, we don't use datas.py anymore
2016-08-03 09:18:41	muj_gabriel	For consistency let's make holder_slug mandatory and add also a method get_response_format(self, action), then we have all configuration in settings and get it using AppConf and holder_slug. Do you agree on this?
2016-08-03 09:32:12	⤷	muj_gabriel uploaded a file: https://lengow.slack.com/files/muj_gabriel/F1XMSATQ8/-.txt (Untitled)
2016-08-04 13:27:39	bianca	will you keep the actual version for now? should we adapt the code to the new version of the connector and create the pull req?
2016-08-04 14:07:37	muj_gabriel	Hi guys, we noticed that allegro api uses SOAP requests. We would like to use a soap client for that which is much more easy and readable instead of creating lots of xml templates (soap envelope) by ourself.
2016-08-04 14:07:58	⤷	We found this library : zeep - Zeep is a modern (2016) and high performant SOAP client build on top of lxml and requests. It's compatible with Python 2 and 3.
2016-08-04 14:08:13	⤷	Which is also listed on https://wiki.python.org/moin/WebServices and is active
2016-08-04 14:08:39	⤷	If we already use some library or you have other preferences please tell us. Thanks!
2016-08-04 16:35:56	clementidelon	@bianca, @muj_gabriel sorry for the late reply, we agree with your proposal to implement the get_response_format (which has to be seen as an interface-like method if I understand correctly), you can adapt the code accordingly :slightly_smiling_face: [:+1:1]
2016-08-04 16:38:15	⤷	@muj_gabriel: This lib looks good, it's ok for us. We would be pleased to have some feedback from you when you use it !
2016-08-04 16:39:49	muj_gabriel	Thanks @clementidelon , we will let you know.
2016-08-05 10:07:11	ematifrea	hello everybody, I see a new field on OrderPayments model called "payment_terms" of type JSONField. Are there any other new columns recently added into the db?
2016-08-08 10:03:22	thomas.loiret	@ematifrea: do you have the directories "patchs/3.1.0" and "patchs/3.2.0" on the lengow_db project I gave you ?
2016-08-08 10:04:17	ematifrea	what i have is 3.0.0.1
2016-08-08 10:06:01	thomas.loiret	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F1Z4LS8EA/lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2 (lengow-dev-lengow_db-d7a2a4f81f28.tar.bz2)
2016-08-08 10:06:28	⤷	Here is the latest version, you should find in the "patchs" directory all the news columns
2016-08-08 10:08:32	ematifrea	thank you
2016-08-08 11:37:08	clement.r	Hi everyone, I'm working on Ricardo's code integration and I'm having trouble to communicate with the API. I'm connected to their VPN but I'm still getting 400, I think that's because I didn't have a valid access token. Can someone tell me how you generate yours ? Thanks :slightly_smiling_face:
2016-08-08 11:43:43	amaxinas	@clement.r:  Hi! After you connect to the vpn you have to go to http://localhost/oauth/get_code?feed_id=xxxx to get a new access token (edited)
2016-08-08 11:46:26	clement.r	Thank you @amaxinas, I'm testing that
2016-08-08 14:16:53	ematifrea	hi again, just did a merge with dev branch and got one core issue in OrderManager:
2016-08-08 14:16:53		in line 388: 
2016-08-08 14:16:53		    address, created = OrderAddress.objects.get_or_create(
2016-08-08 14:16:53		        **delivery_address)
2016-08-08 14:16:53		    http://logger.info (logger.info)("address delivery %s : %s"
2016-08-08 14:16:53		                "" % (http://address.pk (address.pk),
2016-08-08 14:16:53		                      'created' if created else 'reused'))
2016-08-08 14:16:53		as I have multiple orders on the same address (which could be a real case scenario), it will fail into: MultipleObjectsReturned: get() returned more than one OrderAddress -- it returned 43!
2016-08-08 14:16:53		As a quick fix, perhaps OrderAddress.objects.filter(**delivery_address).first(). If object returned then reuse, else create new object.
2016-08-10 10:07:47	clementidelon	clementidelon uploaded a file: https://lengow.slack.com/files/clementidelon/F1ZUQGX28/-.py (Untitled) and commented: Hello @ematifrea
2016-08-10 10:15:29	ematifrea	@clementidelon:  thank you, is it in the dev branch yet?
2016-08-10 10:17:04	clementidelon	Yes, just pushed it
2016-08-10 14:18:41	bianca	it seems that allegro sandbox will not be available for the entire day
2016-08-10 14:18:58	⤷	https://www.facebook.com/AllegroAPI
2016-08-10 14:19:18	⤷	Tomorrow, 10 August at. 8 start break service environment WebAPI Sandbox, which will last until the end of the day. 
2016-08-10 14:19:18		I remind you that the work performed during the service break results in an interruption in access to the environment and the permanent removal of all the data so far on Sandboxie (eg. Additional users or purchases). Details on this subject can be found on a dedicated page of the service.
2016-08-17 15:25:23	amaxinas	Hello! I've made a PR to revert a change I've made for the HTTPConnector and to also make the parameter for get_default_response_format optional.
2016-08-17 15:25:23		https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff
2016-08-17 15:25:23		Can someone please take a quick look at it?
2016-08-17 15:25:23		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/pull-requests/55/us253/diff)
2016-08-17 15:25:23		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-18 08:58:02	bianca	Allegro web api news :disappointed: Tomorrow, 18th August at. 8 we start break services web api sandbox environment which will last until the end of the day.
2016-08-18 08:58:02		Reminder that the work performed during intermission break service result in access to the environment and the permanent removal of any data created to date (e.g. sandboxie Additional users or purchases). Details on this topic can be found on the dedicated page services.
2016-08-22 10:02:47	muj_gabriel	Hi guys, is there a way to access ProductState having account_id? I need product_ids in Aleggro OrderManager and in sync_orders we only send account_id. ProductState has catalog_feed_id field that is the connection with feed. (edited)
2016-08-23 10:58:29	thomas.loiret	Hi guys, I got an integration report from bol ! :slightly_smiling_face:
2016-08-23 10:58:53	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F23TX047M/1057887_3869940.csv (1057887_3869940.csv) and commented: Input file
2016-08-23 10:59:06	⤷	thomas.loiret uploaded a file: https://lengow.slack.com/files/thomas.loiret/F24081MDF/1057887-result-2016-08-23_10_28_11_910.csv (1057887-result-2016-08-23_10_28_11_910.csv) and commented: integration report
2016-08-23 10:59:37	⤷	I hope this will help you to finished the user stories on http://bol.com (bol.com) :slightly_smiling_face:
2016-08-23 11:00:38	amaxinas	Thank you!
2016-08-23 15:49:05	gadumitrachioaiei	hi guys
2016-08-23 15:49:18	⤷	I work on thesaurus for mercadolibre
2016-08-23 15:49:30	⤷	we have 101 000 categories
2016-08-23 15:50:08	⤷	sync_thesaurus runs in about 20 minutes, it consumes more than 2GB of memory
2016-08-23 15:50:46	⤷	letting the core generating the breadcrumb takes a lot of time so I did that myself
2016-08-23 15:51:41	⤷	I found a bug, in case where core doesn't generate the breadcrumb: lengow_root doesn't have breadcrumb and this is needed when you giuys wnat to delete categories
2016-08-23 15:51:47	⤷	I fixied it in the core
2016-08-23 15:53:40	⤷	another problem is checking for categories that are in the db and not in new thesaurus lines
2016-08-23 15:53:40		this took much time ( more than 5 minutes with 100% cpu use )
2016-08-23 15:53:58	⤷	I fixed it by using a set instead of a list
2016-08-23 15:55:10	⤷	we make 3 or 2 database calls per category ( 300 000 or 200 000 ), I suppose you already know this
2016-08-23 15:55:32	⤷	what do you guys think,  do you agree with what I did ?
2016-08-23 16:10:49	⤷	speaking of improvements, mercadolibre can tell us the last time they modified the categories, and we could use this so we don't do anything in case we are up to date
2016-08-23 16:11:20	⤷	is there anyway we can persist this information so we can use it next time we do sync_categories ?
2016-08-23 16:23:05	sebastien.charret	!gadumitrachioaiei hi, could you send link to your commit? (edited)
2016-08-23 16:26:15	gadumitrachioaiei	for manager.py:
2016-08-23 16:26:15		https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53
2016-08-23 16:26:15		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/2c8e66ab0c11666cb3876811cec40daae8558d53)
2016-08-23 16:26:15		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:26:34	⤷	for the rest of the code:
2016-08-23 16:26:34		https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1
2016-08-23 16:26:34		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/commits/d0b75e4a7c7887fc312bbf727d7965be6fd5d0f1)
2016-08-23 16:26:34		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-23 16:38:57	sebastien.charret	!gadumitrachioaiei thx, for the links
2016-08-23 16:57:41	⤷	!gadumitrachioaiei for sync_categories the first approach can be done with redis
2016-08-23 16:57:42	⤷	https://redislabs.com/python-redis
2016-08-23 16:57:42		Python Redis (https://redislabs.com/python-redis)
2016-08-23 16:57:42		Using Python with Redis? Get infinite scalability and high availability with Redis Labs' products and services. Just one line of code, free offerings!
2016-08-23 16:58:42	gadumitrachioaiei	?
2016-08-23 16:59:13	sebastien.charret	if mercadolibre return the last timestamp of they modified categories, you can check the timestamp you have saved with redis
2016-08-23 16:59:23	⤷	if they
2016-08-23 16:59:28	gadumitrachioaiei	w work with redis ?
2016-08-23 16:59:29	sebastien.charret	're different
2016-08-23 16:59:32	⤷	yeah
2016-08-23 16:59:34	gadumitrachioaiei	I didn't know that
2016-08-23 17:00:10	sebastien.charret	it's new for us
2016-08-23 17:00:45	gadumitrachioaiei	so you are telling me to persist last time categories changed in redis ?
2016-08-23 17:00:47	sebastien.charret	but the problem you share us can be managed with redis i think
2016-08-23 17:01:06	gadumitrachioaiei	or what should I be using redis for ?
2016-08-23 17:02:01	sebastien.charret	No, in my understanding mercadolibre can return datas like the date where the categories has been updated
2016-08-23 17:02:11	gadumitrachioaiei	yes
2016-08-23 17:02:55	sebastien.charret	so perhaps you can saved this data and make job to compare the redis saved date
2016-08-23 17:03:19	⤷	by call the mercadolibre api
2016-08-23 17:03:24	gadumitrachioaiei	yes, so I should redis for this, I didn't know about it
2016-08-23 17:03:29	sebastien.charret	why do you think?
2016-08-23 17:03:41	gadumitrachioaiei	do we have doc about we we should use redis in our project ?
2016-08-23 17:03:48	sebastien.charret	no it's new
2016-08-23 17:04:41	⤷	We'll use it in a future features
2016-08-23 17:05:12	⤷	Since this implementation is not done, no doc is present
2016-08-23 17:05:31	gadumitrachioaiei	ok, I need to know under which database and key to save this timestamp, no ?
2016-08-23 17:06:40	sebastien.charret	yeah
2016-08-23 17:07:04	⤷	we need to see with !thomas.loiret
2016-08-23 17:08:40	gadumitrachioaiei	thanks for the news, good to know
2016-08-23 17:09:01	sebastien.charret	yeah i'm glad to so if i can share this :)
2016-08-23 17:09:15	⤷	the lib used is this
2016-08-23 17:09:23	⤷	https://github.com/Grokzen/redis-py-cluster
2016-08-23 17:09:23		Grokzen/redis-py-cluster (https://github.com/Grokzen/redis-py-cluster)
2016-08-23 17:09:23		redis-py-cluster - Python cluster client for the official cluster support targeted for redis 3.0
2016-08-23 17:10:06	gadumitrachioaiei	interesting
2016-08-23 18:16:35	thomas.loiret	@gadumitrachioaiei, no problem to use redis, but the data inside should not be consider as reliable, so if you don't find the timestamp in it, you should a sync_thesaurus from scratch
2016-08-29 09:30:25	gadumitrachioaiei	hi
2016-08-29 09:30:36	⤷	regarding redis cluster
2016-08-29 09:30:51	⤷	I implemented it as django cache backend
2016-08-29 09:31:00	⤷	here are the settings:
2016-08-29 09:31:00		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420
2016-08-29 09:31:00		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/settings/base.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#base.py-420)
2016-08-29 09:31:00		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:31:51	⤷	this is how you get a connection to redis cluster:
2016-08-29 09:31:51		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699
2016-08-29 09:31:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/pyMarketPlaces/utils/helpers.py?at=feature%2Fmercadolibre_v3&fileviewer=file-view-default#helpers.py-699)
2016-08-29 09:31:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:32	⤷	here is a small implementation of redis cluster client as django cache backend:
2016-08-29 09:33:32		https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3
2016-08-29 09:33:32		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/3c601b6ff05d834a04217de910c893e5024f8204/redis_cluster_cache/?at=feature/mercadolibre_v3)
2016-08-29 09:33:32		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-08-29 09:33:55	⤷	right now only mercadolibre sync_thesaurus uses it
2016-08-29 09:34:36	⤷	this means  that sync_thesausurs doesn't work unless you installed redis cluster
2016-08-29 09:34:36		everything else works as usual
2016-08-29 09:35:05	⤷	if this is not ok, let me know
2016-08-29 09:47:37	muj_gabriel	@thomas.loiret In bol docs I only found this "In the outbound folder, an error report will appear with the error messages per EAN. Error reporting also
2016-08-29 09:47:37		appears in .csv format. The error report shows the number of items that has been approved (OK) and
2016-08-29 09:47:37		returns the number of items again that have not been approved (NOK)." Can you ask them more information regarding the report name?
2016-08-29 15:21:12	amaxinas	.
2016-08-29 15:21:12		1. For mercadolibre should we support also auctions or only products with buy_now?
2016-08-29 15:21:12		2. When we are synchronising attributes should we include also categories that don't have attributes or is it ok to ignore them? (edited)
2016-08-29 15:23:30	ematifrea	@thomas.loiret  when deleting a product, do we want all bids to be cancelled together with the product? 1 - yes, 0 - no; default value is 0; only bids placed in the bidding process are cancelled).
2016-08-29 15:47:13	amaxinas	Mercadolibre has attributes per category, but only some of them can be used to create variations(ex. color, size). We were thinking of using the id that we get from the /categories call as attribute name for the product attributes and attribute id   + _lengow_var for the attributes that can be used to create variations.
2016-08-29 15:47:13		Ex. color_lengow_var, size_lengow_var, so that we can distinguish them from the other attributes.
2016-08-29 15:47:13		Do you think this is ok?
2016-08-29 15:48:45	⤷	We need to use the attribute id as name because we need to use the id of the attributes when we are creating/editing products so we need to get the id of the attributes from the lengow feed instead of the name.
2016-08-29 18:28:37	thomas.loiret	@muj_gabriel : The report name pattern is VENDORNUMBER-result-YYYY-MM-DD_HH_MM_SS_FFF.csv
2016-08-29 18:29:08	⤷	@amaxinas : 1/ only buy now, 2/ it is ok to ignore them
2016-08-29 18:29:20	⤷	@ematifrea : you should go with the default value
2016-08-29 18:29:38	⤷	@amaxinas : For the attributes name about variation, it seems ok for me
2016-08-29 18:29:51	amaxinas	Thank you! :slightly_smiling_face:
2016-08-30 11:43:36	gadumitrachioaiei	hi guys
2016-08-30 11:44:14	⤷	I am doing sync_products for mercadolibre, and updating a product is not that easy, quite hard actually, I think :slightly_smiling_face:
2016-08-30 11:44:24	⤷	Only certain fields can be updated.
2016-08-30 11:44:31	⤷	.
2016-08-30 11:44:31		The attribute listing_type can only be modified once. Listing type refers to how your products will be listed on the site.
2016-08-30 11:44:31		I am thinking to store in additional_data listing_type information in ordet o solve this problem.
2016-08-30 11:44:39	⤷	.
2016-08-30 11:44:39		There are differences if the products has already been sold. For example I can update condition of a product if it hasn't been sold yet, but if it was sold, updating it will produce error.
2016-08-30 11:44:39		I am thinking to make an api call to find if the product has been sold yet. If it has, don't include in the update these kind of attributes. But how will I tell the merchant that such attributes could not be updated? This is tricky.
2016-08-30 11:45:11	⤷	Plus, there are many api calls that should be used. :disappointed:
2016-08-30 16:57:51	⤷	this is an example of how one can make a volvo car product, with no variations on mercadolibre:
2016-08-30 16:57:51		curl -X POST -H "Content-Type: application/json" -d'{
2016-08-30 16:57:51		  "title":"Best Car",
2016-08-30 16:57:51		  "category_id":"MLA27352",
2016-08-30 16:57:51		  "price":10,
2016-08-30 16:57:51		  "currency_id":"ARS",
2016-08-30 16:57:51		  "condition": "new",
2016-08-30 16:57:51		  "available_quantity":1,
2016-08-30 16:57:51		  "listing_type_id":"gold_premium",
2016-08-30 16:57:51		  "description": "SUV",
2016-08-30 16:57:51		  "video_id": "YOUTUBE_ID_HERE",
2016-08-30 16:57:51		  "pictures":[
2016-08-30 16:57:51		    {"source":"http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg"}
2016-08-30 16:57:51		  ],
2016-08-30 16:57:51		  "attributes": [
2016-08-30 16:57:51		    {"id": "MLA1744-COLOREXT", "value_id": "MLA1744-COLOREXT-AMARILLO"},
2016-08-30 16:57:51		    {"id": "MLA1744-COMBUS", "value_id": "MLA1744-COMBUS-DIESEL"},
2016-08-30 16:57:51		    {"id": "MLA1744-KMTS", "value_name": "10", "value_id": 10},
2016-08-30 16:57:51		    {"id": "MLA1744-DOOR", "value_id": "MLA1744-DOOR-5"},
2016-08-30 16:57:51		    {"id": "MLA1744-YEAR", "value_id": "MLA1744-YEAR-2014"},
2016-08-30 16:57:51		    ],
2016-08-30 16:57:51		    "location": {
2016-08-30 16:57:51		    "city": {
2016-08-30 16:57:51		      "id": "TUxBQ0NBUGZlZG1sYQ",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "state": {
2016-08-30 16:57:51		      "id": "TUxBUENBUGw3M2E1",
2016-08-30 16:57:51		      "name": "Capital Federal"
2016-08-30 16:57:51		    },
2016-08-30 16:57:51		    "country": {
2016-08-30 16:57:51		      "id": "AR",
2016-08-30 16:57:51		      "name": "Argentina"
2016-08-30 16:57:51		    }
2016-08-30 16:57:51		  }
2016-08-30 16:57:51		}' https://api.mercadolibre.com/items/validate?access_token=APP_USR-3893288371383029-083009-4c6e312a1066590587cb75e4ab7154d6__L_E__-226740938
2016-08-30 16:57:51		http://upload.wikimedia.org/wikipedia/commons/e/e9/Tea_Cup.jpg
2016-08-30 16:58:12	⤷	the attributes and location are mandatory, specific for the category
2016-08-30 16:59:30	⤷	I don't know why location is mandatory, because if you query their api for attributes, they say nothing about location
2016-08-31 13:03:29	⤷	if a product is in a category, the feed will return values only for its attributes, not for all attributes in all categories, right ?
2016-09-01 10:50:22	⤷	an attribute of type list comes from feed as list or comma separated string ?
2016-09-01 13:27:53	amaxinas	I have a quick question. I calculated the size of the xml for the attributes sync for mercadolibre Argentina and it's 163Mb. Is this size ok? Is there a size limit from which we should consider using universes? (edited)
2016-09-01 15:59:30	thomas.loiret	@gadumitrachioaiei : it will come as a comma separated string
2016-09-01 15:59:55	⤷	@amaxinas : we actually spoke about this with some colleague, and it should not be an issue :slightly_smiling_face:
2016-09-01 16:00:56	⤷	I just had some information from Mercado Libre after I ask about having some test orders, this is the response :
2016-09-01 16:01:21	⤷	> First of all, you need to create a test user. Every item created by a test user will be a test item and you will be able to buy it with another test user. 
2016-09-01 16:01:21		> So, we suggest you to create two test users: one will simulate a seller and the other, a buyer. 
2016-09-01 16:01:21		> Here (http://developers.mercadolibre.com/start-testing/) you will find how to create test users.
2016-09-01 16:01:21		Start testing – MercadoLibre Developers (http://developers.mercadolibre.com/start-testing/)
2016-09-01 16:01:38	⤷	Let me know if it helps or not
2016-09-01 17:01:41	amaxinas	We managed to create two test users, items, but the form for buying the product asks for real card data or it provides some number(with rapidpago, not sure what kind of payment this is exactly) with which we should be able to pay for the product. That's where we got stuck.
2016-09-05 15:20:36	thomas.loiret	@amaxinas : You can find some test credit card here : https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/ :slightly_smiling_face:
2016-09-05 15:20:36		Credit Cards to Test - MercadoPago Developers (https://www.mercadopago.com.br/developers/en/solutions/payments/custom-checkout/test-cards/)
2016-09-05 15:20:36		We have a set of credit cards of different countries for you to try payments in the checkout you are developing. [:+1:1]
2016-09-05 16:08:56	amaxinas	@thomas.loiret thanks! We'll try with these
2016-09-06 09:03:38	bianca	good morning
2016-09-07 13:03:52	gadumitrachioaiei	guys, mercadolibre doesn't accept some attributes, for example Color, for both parent product and variations.
2016-09-07 13:03:52		if I receive this, what should I do?
2016-09-07 13:03:52		1. is it error caught by the checker so invalidate the product ?
2016-09-07 13:03:52		2. quietly remove Color from parent product and leave it only for variations ?
2016-09-07 13:56:21	thomas.loiret	@gadumitrachioaiei : option 2 :slightly_smiling_face:
2016-09-13 09:31:27	⤷	Guys, we were asked if the Allegro connector will support product page template ? Did you saw something about that, should it be embeded in the description like eBay or is it something else ?
2016-09-13 09:42:16	bianca	one moment, we analyze it; we did offers synchronization
2016-09-13 09:46:44	⤷	and we used doNewAuctionExt where the request have the field id's of the form (the attributes per category)
2016-09-13 09:46:46	⤷	http://allegro.pl/webapi/documentation.php/show/id,113
2016-09-13 09:46:46		Allegro.pl - Więcej niż aukcje. Najlepsze oferty na największej platformie handlowej. (http://allegro.pl/webapi/documentation.php/show/id,113)
2016-09-13 09:46:46		Allegro - najwięcej ofert w jednym miejscu. Radość zakupów i 100% bezpieczeństwa dla każdej transakcji. Kup Teraz!
2016-09-13 09:49:56	gadumitrachioaiei	We used a library called zeep to be able to make soap calls to allegro api. We just feed the the library with json like data, we tell it what soap action to execute, and it knows what to do next
2016-09-13 09:50:14	⤷	I don't understand what you mean by product page template ?
2016-09-13 09:51:11	⤷	I haven't worked on allegro, so I don't understand much
2016-09-13 09:52:40	⤷	our library goes at allegro and discovers their soap service with wsdl document:
2016-09-13 09:52:51	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29
2016-09-13 09:52:51		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/core_connectors/soap_connector.py?at=feature%2Fallegro_v3&fileviewer=file-view-default#soap_connector.py-29)
2016-09-13 09:52:51		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 09:59:40	bianca	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2AUWDXEF/example_-_with_the_list_of_the_fields_id_s_that_we_need_to_send_for_creating_an_offer.xml (Example - with the list of the fields id's that we need to send for creating an offer)
2016-09-13 10:00:50	⤷	fid value 8 means the price attribute
2016-09-13 10:02:21	gadumitrachioaiei	ok, I understand now
2016-09-13 10:02:21		we have hardcoded field ids for each product attribute, and we map the lengow feed attributes to these field ids
2016-09-13 10:02:25	⤷	https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default
2016-09-13 10:02:25		Bitbucket (https://bitbucket.org/lengow-dev/pymarketplaces/src/cf07c38c311241c058c2f2f76abda4a9a119cf35/sp_allegro/products/transformer.py?at=feature%2Fallegro_v3&fileviewer=file-view-default)
2016-09-13 10:02:25		Bitbucket is a Git and Mercurial based source code management and collaboration solution in the cloud. Bitbucket is simple and powerful, enables code collaboration for teams, works with the tools that matter, and is easy to use even for teams new to Git and Mercurial
2016-09-13 10:02:31	bianca	Ema implemented this but she had some questions added via email
2016-09-21 17:29:22	⤷	bianca uploaded a file: https://lengow.slack.com/files/bianca/F2E8J4T71/hitmeister.pdf (Hitmeister.pdf) and commented: This is a document with some details of the features implemented and the documentation, api used.
2016-09-30 11:10:33	gadumitrachioaiei	Thomas can you explain us more about converting data from amazon feed v2 to feed v3 ?
2016-09-30 11:10:33		Our input data will be mysql data or xml lengow feed v2 ?
2016-09-30 11:10:33		Our output should be postgresql data or xml feed v3 ?
2016-09-30 11:10:33		Can you give us example data of input and output ?
2016-09-30 11:10:33		In the v2 code we could not find anything related to products !
2016-09-30 11:10:33		Can you also explain us in more detail the big picture ?
2016-09-30 11:10:33		Our task would be just converting data from v2 format to v3 format ? Or should we worry about conflicts. For example, is it possible that after our conversion, the merchant changes a product in v2 or/and v3, what should have higher priority, v2 changes or v3 changes ?
2016-09-30 11:10:33		Or is our conversion be done only once and don't care about conflict changes ?
2016-09-30 11:10:38	⤷	@thomas.loiret
2016-09-30 11:21:07	thomas.loiret	As I said this morning, I need to write down some specification about that, so you will have all the needed information. It will takes time to gather everything on my side, I don't know yet when I will be able to deliver it. RIght now I am also working on a other US simpler on Fnac for you, I think I will be able to give it to you before the Amazon migration US.
2016-09-30 11:26:41	gadumitrachioaiei	thanks
2016-09-30 14:48:22	anavoda	hello Thomas. For Allegro - I tried a sync_price_stock but we receive an unusual error from the API:
2016-09-30 14:48:51	⤷	<faultcode>ERR_YOU_CANT_CHANGE_ITEM_BILLING_INVALID</faultcode>
2016-09-30 14:48:51		            <faultstring>Odwołanie ofert nie jest możliwe z uwagi na fakt, że aukcja nie została wystawiona przez zalogowanego użytkownika, jest zakończona lub nie zostały w niej złożone żadne oferty kupna. (26)</faultstring>
2016-09-30 14:48:51		            <faultactor>doChangePriceItem - You cannot make any changes in this auction (billing validation failed)</faultactor>
2016-09-30 14:49:34	⤷	is it possible there is something wrong with our Allegro account? thank you
2016-09-30 16:22:13	thomas.loiret	Hello Ana, I don't know about that
2016-09-30 16:43:13	anavoda	ok, thank you. I will try again, maybe is just an API issue
